{
  "task": "Task 15 - Final Integration and User Experience Testing",
  "summary": {
    "overall_success": false,
    "total_test_categories": 7,
    "passed_categories": 1,
    "failed_categories": 6,
    "success_rate": 14.285714285714285,
    "total_duration_seconds": 73.817619,
    "average_test_duration": 10.544684376035418
  },
  "detailed_results": {
    "UI Enhancements Integration": {
      "success": false,
      "duration": 1.686474084854126,
      "return_code": 1,
      "stdout": "\ud83c\udfa8 Running UI Enhancements Final Integration Tests...\n============================================================\n================================== test session starts ==================================\nplatform darwin -- Python 3.13.5, pytest-8.4.2, pluggy-1.5.0 -- /Users/mac/miniconda3/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/mac/Desktop/PharmGPT\nplugins: anyio-4.9.0, langsmith-0.4.13\ncollecting ... collected 10 items\n\ntest_ui_enhancements_final_integration.py::TestUIEnhancementsFinalIntegration::test_simplified_sidebar_integration FAILED [ 10%]\n\n======================================= FAILURES ========================================\n________ TestUIEnhancementsFinalIntegration.test_simplified_sidebar_integration _________\ntest_ui_enhancements_final_integration.py:77: in test_simplified_sidebar_integration\n    session_manager.initialize_session(\"test-user-1\")\nE   TypeError: SessionManager.initialize_session() missing 1 required positional argument: 'email'\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:00:54.115 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Session state does not function when running a script without `streamlit run`\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.181 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.182 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.182 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:54.182 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\n================================ short test summary info ================================\nFAILED test_ui_enhancements_final_integration.py::TestUIEnhancementsFinalIntegration::test_simplified_sidebar_integration\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n=================================== 1 failed in 0.71s ===================================\n\n\u274c Some UI enhancement integration tests failed!\n\ud83d\udd27 Please review and fix the issues.\n",
      "stderr": "",
      "summary": "\u274c Some UI enhancement integration tests failed!",
      "error": ""
    },
    "Complete Workflow Integration": {
      "success": false,
      "duration": 11.240446329116821,
      "return_code": 1,
      "stdout": "\ud83d\udd04 Running Complete Workflow Integration Tests...\n============================================================\n================================== test session starts ==================================\nplatform darwin -- Python 3.13.5, pytest-8.4.2, pluggy-1.5.0 -- /Users/mac/miniconda3/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/mac/Desktop/PharmGPT\nplugins: anyio-4.9.0, langsmith-0.4.13\ncollecting ... collected 6 items\n\ntest_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_complete_document_to_response_workflow FAILED [ 16%]\ntest_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_document_processing_error_handling FAILED [ 33%]\ntest_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_rag_context_retrieval_accuracy FAILED [ 50%]\ntest_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_conversation_isolation_and_management FAILED [ 66%]\ntest_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_dark_theme_consistency_across_workflow PASSED [ 83%]\ntest_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_premium_model_token_limit_in_workflow FAILED [100%]\n\n======================================= FAILURES ========================================\n______ TestCompleteWorkflowIntegration.test_complete_document_to_response_workflow ______\ntest_complete_workflow_integration.py:85: in test_complete_document_to_response_workflow\n    assert login_result.success, \"User should authenticate successfully\"\nE   AssertionError: User should authenticate successfully\nE   assert False\nE    +  where False = AuthResult(success=False, user_id=None, email=None, error_message='Authentication service is temporarily unavailable. Please try again later.', user_data=None).success\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:00:55.637 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.695 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.695 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.695 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.695 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Session state does not function when running a script without `streamlit run`\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:00:55.696 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\nERROR    error_handler:error_handler.py:97 Error in sign_in: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_in: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_in: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    auth_manager:auth_manager.py:195 Login failed after 3 attempts: 'AuthenticationManager' object has no attribute 'supabase'\n________ TestCompleteWorkflowIntegration.test_document_processing_error_handling ________\ntest_complete_workflow_integration.py:312: in test_document_processing_error_handling\n    session_manager.initialize_session(\"test-user-1\")\nE   TypeError: SessionManager.initialize_session() missing 1 required positional argument: 'email'\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.114 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\n__________ TestCompleteWorkflowIntegration.test_rag_context_retrieval_accuracy __________\ntest_complete_workflow_integration.py:390: in test_rag_context_retrieval_accuracy\n    with patch.object(rag_orchestrator, 'vector_search') as mock_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../miniconda3/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../miniconda3/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <rag_orchestrator_optimized.RAGOrchestrator object at 0x168f64050> does not have the attribute 'vector_search'\n______ TestCompleteWorkflowIntegration.test_conversation_isolation_and_management _______\ntest_complete_workflow_integration.py:419: in test_conversation_isolation_and_management\n    session_manager.initialize_session(\"test-user-1\")\nE   TypeError: SessionManager.initialize_session() missing 1 required positional argument: 'email'\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.256 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.257 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.257 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:04.257 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\n______ TestCompleteWorkflowIntegration.test_premium_model_token_limit_in_workflow _______\ntest_complete_workflow_integration.py:544: in test_premium_model_token_limit_in_workflow\n    with patch.object(rag_orchestrator, 'generate_response_with_context') as mock_generate:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../miniconda3/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../miniconda3/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <rag_orchestrator_optimized.RAGOrchestrator object at 0x168990550> does not have the attribute 'generate_response_with_context'\n================================ short test summary info ================================\nFAILED test_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_complete_document_to_response_workflow\nFAILED test_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_document_processing_error_handling\nFAILED test_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_rag_context_retrieval_accuracy\nFAILED test_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_conversation_isolation_and_management\nFAILED test_complete_workflow_integration.py::TestCompleteWorkflowIntegration::test_premium_model_token_limit_in_workflow\n======================== 5 failed, 1 passed, 1 warning in 9.38s =========================\n\n\u274c Some complete workflow tests failed!\n\ud83d\udd27 Please review and fix the workflow issues.\n",
      "stderr": "",
      "summary": "======================== 5 failed, 1 passed, 1 warning in 9.38s =========================",
      "error": ""
    },
    "Application Integration Validation": {
      "success": false,
      "duration": 6.29984712600708,
      "return_code": 1,
      "stdout": "\ud83e\uddec Pharmacology Chat App - Integration Validation\nValidating complete application component integration\n\n\ud83d\udd0d Validating Application Integration...\n==================================================\n\n\ud83d\udce6 Validating app...\n   \u2705 app\n\n\ud83d\udce6 Validating auth_manager...\n   \u2705 auth_manager\n\n\ud83d\udce6 Validating session_manager...\n   \u2705 session_manager\n\n\ud83d\udce6 Validating chat_manager...\n   \u2705 chat_manager\n\n\ud83d\udce6 Validating message_store_optimized...\n   \u2705 message_store_optimized\n\n\ud83d\udce6 Validating theme_manager...\n   \u274c theme_manager\n      \u26a0\ufe0f  ThemeManager missing method: toggle_theme\n\n\ud83d\udce6 Validating model_manager...\n   \u2705 model_manager\n\n\ud83d\udce6 Validating rag_orchestrator_optimized...\n   \u2705 rag_orchestrator_optimized\n\n\ud83d\udce6 Validating chat_interface_optimized...\n   \u2705 chat_interface_optimized\n\n\ud83d\udce6 Validating performance_optimizer...\n   \u2705 performance_optimizer\n\n\ud83d\udd04 Validating Integration Flows...\n\n============================================================\n\ud83d\udd17 APPLICATION INTEGRATION VALIDATION REPORT\n============================================================\n\ud83c\udfaf Overall Status: \u274c FAILURE\n\n\ud83d\udce6 Component Validation:\n   \u2705 Valid: 9/10\n   \u274c Invalid: 1/10\n\n\ud83d\udd04 Flow Validation:\n   \u2705 Valid: 4/5\n   \u274c Invalid: 1/5\n\n\ud83d\udccb Component Details:\n   \u2705 app (0 integration points)\n   \u2705 auth_manager (5 integration points)\n   \u2705 session_manager (0 integration points)\n   \u2705 chat_manager (1 integration points)\n   \u2705 message_store_optimized (1 integration points)\n   \u274c theme_manager (0 integration points)\n      \u26a0\ufe0f  ThemeManager missing method: toggle_theme\n   \u2705 model_manager (12 integration points)\n   \u2705 rag_orchestrator_optimized (4 integration points)\n   \u2705 chat_interface_optimized (6 integration points)\n   \u2705 performance_optimizer (0 integration points)\n\n\ud83d\udd04 Flow Details:\n   \u2705 authentication_flow: Authentication flow integration validated\n   \u2705 chat_flow: Chat flow integration validated\n   \u274c theme_flow: Theme flow validation failed: 'ThemeManager' object has no attribute 'toggle_theme'\n   \u2705 model_switching_flow: Model switching flow integration validated\n   \u2705 data_isolation_flow: Data isolation flow integration validated\n\n\ud83d\udca1 Recommendations:\n   \ud83d\udd27 Address the following integration issues:\n      - Fix theme_manager: ThemeManager missing method: toggle_theme\n   \ud83e\uddea Re-run validation after fixing issues\n   \ud83d\udccb Consider adding integration tests for failed components\n   \ud83d\udd0d Review component dependencies and interfaces\n\n============================================================\n",
      "stderr": "2025-09-27 00:01:06.165 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:10.667 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:11.103 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n",
      "summary": "\u274c theme_flow: Theme flow validation failed: 'ThemeManager' object has no attribute 'toggle_theme'",
      "error": "2025-09-27 00:01:06.165 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:10.667 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:11.103 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n"
    },
    "Final Integration Tests": {
      "success": false,
      "duration": 24.518704175949097,
      "return_code": 1,
      "stdout": "\ud83e\uddea Running Final Integration Tests...\n==================================================\n================================== test session starts ==================================\nplatform darwin -- Python 3.13.5, pytest-8.4.2, pluggy-1.5.0 -- /Users/mac/miniconda3/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/mac/Desktop/PharmGPT\nplugins: anyio-4.9.0, langsmith-0.4.13\ncollecting ... collected 9 items\n\ntest_final_integration.py::TestFinalIntegration::test_complete_user_journey_signup_to_logout FAILED [ 11%]\ntest_final_integration.py::TestFinalIntegration::test_user_data_isolation_multiple_users FAILED [ 22%]\ntest_final_integration.py::TestFinalIntegration::test_theme_switching_and_responsive_design FAILED [ 33%]\ntest_final_integration.py::TestFinalIntegration::test_model_switching_and_preferences FAILED [ 44%]\ntest_final_integration.py::TestFinalIntegration::test_error_handling_and_fallbacks FAILED [ 55%]\ntest_final_integration.py::TestFinalIntegration::test_performance_optimization_features FAILED [ 66%]\ntest_final_integration.py::TestFinalIntegration::test_security_and_data_protection FAILED [ 77%]\ntest_final_integration.py::TestFinalIntegration::test_ui_component_integration FAILED [ 88%]\ntest_final_integration.py::TestFinalIntegration::test_deployment_readiness FAILED [100%]\n\n======================================= FAILURES ========================================\n___________ TestFinalIntegration.test_complete_user_journey_signup_to_logout ____________\ntest_final_integration.py:78: in test_complete_user_journey_signup_to_logout\n    assert signup_result.success, \"User signup should succeed\"\nE   AssertionError: User signup should succeed\nE   assert False\nE    +  where False = AuthResult(success=False, user_id=None, email=None, error_message='Authentication service is temporarily unavailable. Please try again later.', user_data=None).success\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:01:17.005 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.012 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.012 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.013 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:17.014 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    auth_manager:auth_manager.py:125 Registration failed after 3 attempts: 'AuthenticationManager' object has no attribute 'supabase'\n_____________ TestFinalIntegration.test_user_data_isolation_multiple_users ______________\ntest_final_integration.py:133: in test_user_data_isolation_multiple_users\n    assert user1_signup.success and user2_signup.success, \"Both users should sign up successfully\"\nE   AssertionError: Both users should sign up successfully\nE   assert (False)\nE    +  where False = AuthResult(success=False, user_id=None, email=None, error_message='Authentication service is temporarily unavailable. Please try again later.', user_data=None).success\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.333 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:21.334 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    auth_manager:auth_manager.py:125 Registration failed after 3 attempts: 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_up: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    auth_manager:auth_manager.py:125 Registration failed after 3 attempts: 'AuthenticationManager' object has no attribute 'supabase'\n____________ TestFinalIntegration.test_theme_switching_and_responsive_design ____________\ntest_final_integration.py:188: in test_theme_switching_and_responsive_design\n    new_theme = theme_manager.toggle_theme()\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AttributeError: 'ThemeManager' object has no attribute 'toggle_theme'\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:01:30.133 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.133 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n_______________ TestFinalIntegration.test_model_switching_and_preferences _______________\ntest_final_integration.py:215: in test_model_switching_and_preferences\n    session_manager.initialize_session(\"test-user-1\")\nE   TypeError: SessionManager.initialize_session() missing 1 required positional argument: 'email'\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:01:30.143 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.143 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.143 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.144 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\n________________ TestFinalIntegration.test_error_handling_and_fallbacks _________________\ntest_final_integration.py:245: in test_error_handling_and_fallbacks\n    assert signin_result.error is not None, \"Error should be captured\"\n           ^^^^^^^^^^^^^^^^^^^\nE   AttributeError: 'AuthResult' object has no attribute 'error'\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:01:30.152 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.152 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.152 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.152 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.152 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.152 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:30.152 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\nERROR    error_handler:error_handler.py:97 Error in sign_in: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_in: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    error_handler:error_handler.py:97 Error in sign_in: authentication - 'AuthenticationManager' object has no attribute 'supabase'\nERROR    auth_manager:auth_manager.py:195 Login failed after 3 attempts: 'AuthenticationManager' object has no attribute 'supabase'\n______________ TestFinalIntegration.test_performance_optimization_features ______________\ntest_final_integration.py:284: in test_performance_optimization_features\n    with patch.object(performance_optimizer, 'get_cached_messages') as mock_get_cache:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../miniconda3/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../miniconda3/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <performance_optimizer.PerformanceOptimizer object at 0x107fae3c0> does not have the attribute 'get_cached_messages'\n________________ TestFinalIntegration.test_security_and_data_protection _________________\ntest_final_integration.py:330: in test_security_and_data_protection\n    session_manager.initialize_session(\"test-user-1\")\nE   TypeError: SessionManager.initialize_session() missing 1 required positional argument: 'email'\n--------------------------------- Captured stderr call ----------------------------------\n2025-09-27 00:01:35.041 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:35.042 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n----------------------------------- Captured log call -----------------------------------\nERROR    error_handler:error_handler.py:97 Error in initialization: authentication - Invalid URL\n__________________ TestFinalIntegration.test_ui_component_integration ___________________\ntest_final_integration.py:340: in test_ui_component_integration\n    from ui_components import UIComponents\nE   ImportError: cannot import name 'UIComponents' from 'ui_components' (/Users/mac/Desktop/PharmGPT/ui_components.py)\n____________________ TestFinalIntegration.test_deployment_readiness _____________________\ntest_final_integration.py:388: in test_deployment_readiness\n    with patch.object(health_checker, 'check_database_connection') as mock_db_check:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../miniconda3/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../miniconda3/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <health_check.HealthChecker object at 0x13f096710> does not have the attribute 'check_database_connection'\n================================ short test summary info ================================\nFAILED test_final_integration.py::TestFinalIntegration::test_complete_user_journey_signup_to_logout\nFAILED test_final_integration.py::TestFinalIntegration::test_user_data_isolation_multiple_users\nFAILED test_final_integration.py::TestFinalIntegration::test_theme_switching_and_responsive_design\nFAILED test_final_integration.py::TestFinalIntegration::test_model_switching_and_preferences\nFAILED test_final_integration.py::TestFinalIntegration::test_error_handling_and_fallbacks\nFAILED test_final_integration.py::TestFinalIntegration::test_performance_optimization_features\nFAILED test_final_integration.py::TestFinalIntegration::test_security_and_data_protection\nFAILED test_final_integration.py::TestFinalIntegration::test_ui_component_integration\nFAILED test_final_integration.py::TestFinalIntegration::test_deployment_readiness - At...\n============================ 9 failed, 2 warnings in 18.67s =============================\n\n\u274c Some integration tests failed!\n\ud83d\udd27 Please review and fix the issues before deployment.\n",
      "stderr": "2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n",
      "summary": "\u274c Some integration tests failed!",
      "error": "2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n"
    },
    "Comprehensive Test Suite": {
      "success": false,
      "duration": 15.433640003204346,
      "return_code": 1,
      "stdout": "\ud83e\uddea COMPREHENSIVE TEST SUITE EXECUTION\n================================================================================\nStarted at: 2025-09-27 00:01:41\n================================================================================\n\n==================== Comprehensive Suite ====================\n\ud83e\uddea Running Comprehensive Test Suite\n============================================================\n\n\ud83d\udd10 Authentication Manager Tests\n----------------------------------------\n\u2705 Auth manager initialization\n\u2705 Sign up validation\n\u2705 Sign in validation\n\u2705 Session validation\n\n\ud83d\udd04 Session Manager Tests\n----------------------------------------\n\u2705 Session initialization\n\u274c Preference management: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\u274c Session validation: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n\ud83c\udfa8 UI Component Tests\n----------------------------------------\n\u274c Theme manager: 'ThemeManager' object has no attribute 'toggle_theme'\n\u2705 Chat interface\n\u2705 Responsive design\n\n\ud83d\udd17 Integration Tests\n----------------------------------------\n\u274c User data isolation: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\u274c Error ensuring user exists: object of type 'Mock' has no len()\n\u2705 Auth-chat integration\n\u2705 End-to-end flow\n\n\ud83d\udd0d RAG Pipeline Tests\n----------------------------------------\n\u2705 Vector retrieval\n\u2705 Context building\n\u2705 RAG orchestrator\n\n============================================================\n\ud83d\udcca Test Results Summary\n============================================================\n\u2705 Auth Tests: 4 passed, 0 failed\n\u274c Session Tests: 1 passed, 2 failed\n   \u2022 Preference mgmt: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n   \u2022 Session validation: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\u274c Ui Tests: 2 passed, 1 failed\n   \u2022 Theme manager: 'ThemeManager' object has no attribute 'toggle_theme'\n\u274c Integration Tests: 2 passed, 1 failed\n   \u2022 Data isolation: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\u2705 Rag Tests: 3 passed, 0 failed\n------------------------------------------------------------\nTotal: 12 passed, 4 failed\n\u26a0\ufe0f  4 tests failed\n\n==================== Authentication Unit Tests ====================\n\ud83d\udd10 Running Authentication Unit Tests\n==================================================\n\n==================================================\n\u274c 7 test(s) failed, 10 error(s)\n",
      "stderr": "Error in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.042 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\ntest_get_current_user_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_authenticated)\nTest getting current user when authenticated ... FAIL\ntest_get_current_user_not_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_not_authenticated)\nTest getting current user when not authenticated ... ok\ntest_initialization_missing_secrets (test_auth_unit.TestAuthenticationManager.test_initialization_missing_secrets)\nTest initialization failure with missing secrets ... Error in configuration: authentication - 'SUPABASE_URL'\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - 'AuthenticationManager' object has no attribute 'supabase_url'\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.516 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.516 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nFAIL\ntest_initialization_success (test_auth_unit.TestAuthenticationManager.test_initialization_success)\nTest successful initialization of AuthenticationManager ... FAIL\ntest_is_authenticated (test_auth_unit.TestAuthenticationManager.test_is_authenticated)\nTest authentication status check ... ok\ntest_sign_in_success (test_auth_unit.TestAuthenticationManager.test_sign_in_success)\nTest successful sign in ... Error in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nLogin failed after 3 attempts: [Errno 8] nodename nor servname provided, or not known\nFAIL\ntest_sign_in_validation (test_auth_unit.TestAuthenticationManager.test_sign_in_validation)\nTest sign in validation ... ok\ntest_sign_out (test_auth_unit.TestAuthenticationManager.test_sign_out)\nTest sign out functionality ... FAIL\ntest_sign_up_success (test_auth_unit.TestAuthenticationManager.test_sign_up_success)\nTest successful sign up ... Error in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nRegistration failed after 3 attempts: [Errno 8] nodename nor servname provided, or not known\nFAIL\ntest_sign_up_validation_empty_fields (test_auth_unit.TestAuthenticationManager.test_sign_up_validation_empty_fields)\nTest sign up validation with empty fields ... ok\ntest_sign_up_validation_short_password (test_auth_unit.TestAuthenticationManager.test_sign_up_validation_short_password)\nTest sign up validation with short password ... ok\ntest_clear_session (test_auth_unit.TestSessionManager.test_clear_session)\nTest session clearing ... ERROR\ntest_get_user_id (test_auth_unit.TestSessionManager.test_get_user_id)\nTest getting user ID ... ERROR\ntest_get_user_session (test_auth_unit.TestSessionManager.test_get_user_session)\nTest getting user session ... ERROR\ntest_initialization (test_auth_unit.TestSessionManager.test_initialization)\nTest SessionManager initialization ... ERROR\ntest_initialize_session (test_auth_unit.TestSessionManager.test_initialize_session)\nTest session initialization ... ERROR\ntest_is_authenticated (test_auth_unit.TestSessionManager.test_is_authenticated)\nTest authentication status check ... ERROR\ntest_update_preferences (test_auth_unit.TestSessionManager.test_update_preferences)\nTest updating user preferences ... ERROR\ntest_validate_session (test_auth_unit.TestSessionManager.test_validate_session)\nTest session validation ... ERROR\ntest_get_current_user_id_authenticated (test_auth_unit.TestAuthGuard.test_get_current_user_id_authenticated)\nTest getting current user ID when authenticated ... ok\ntest_get_current_user_id_not_authenticated (test_auth_unit.TestAuthGuard.test_get_current_user_id_not_authenticated)\nTest getting current user ID when not authenticated ... ok\ntest_initialization (test_auth_unit.TestAuthGuard.test_initialization)\nTest AuthGuard initialization ... ok\ntest_require_authentication_failure (test_auth_unit.TestAuthGuard.test_require_authentication_failure)\nTest failed authentication requirement ... ERROR\ntest_require_authentication_success (test_auth_unit.TestAuthGuard.test_require_authentication_success)\nTest successful authentication requirement ... ERROR\ntest_protect_chat_interface_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_authenticated)\nTest chat interface protection for authenticated user ... ok\ntest_protect_chat_interface_not_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_not_authenticated)\nTest chat interface protection for unauthenticated user ... FAIL\n\n======================================================================\nERROR: test_clear_session (test_auth_unit.TestSessionManager.test_clear_session)\nTest session clearing\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 288, in test_clear_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_get_user_id (test_auth_unit.TestSessionManager.test_get_user_id)\nTest getting user ID\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 316, in test_get_user_id\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_get_user_session (test_auth_unit.TestSessionManager.test_get_user_session)\nTest getting user session\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 273, in test_get_user_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_initialization (test_auth_unit.TestSessionManager.test_initialization)\nTest SessionManager initialization\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 247, in test_initialization\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_initialize_session (test_auth_unit.TestSessionManager.test_initialize_session)\nTest session initialization\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 258, in test_initialize_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_is_authenticated (test_auth_unit.TestSessionManager.test_is_authenticated)\nTest authentication status check\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 304, in test_is_authenticated\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_update_preferences (test_auth_unit.TestSessionManager.test_update_preferences)\nTest updating user preferences\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 328, in test_update_preferences\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_validate_session (test_auth_unit.TestSessionManager.test_validate_session)\nTest session validation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 344, in test_validate_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_require_authentication_failure (test_auth_unit.TestAuthGuard.test_require_authentication_failure)\nTest failed authentication requirement\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 405, in test_require_authentication_failure\n    result = self.auth_guard.require_authentication()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AuthGuard' object has no attribute 'require_authentication'\n\n======================================================================\nERROR: test_require_authentication_success (test_auth_unit.TestAuthGuard.test_require_authentication_success)\nTest successful authentication requirement\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 397, in test_require_authentication_success\n    result = self.auth_guard.require_authentication()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AuthGuard' object has no attribute 'require_authentication'\n\n======================================================================\nFAIL: test_get_current_user_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_authenticated)\nTest getting current user when authenticated\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 194, in test_get_current_user_authenticated\n    self.assertIsNotNone(user)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^\nAssertionError: unexpectedly None\n\n======================================================================\nFAIL: test_initialization_missing_secrets (test_auth_unit.TestAuthenticationManager.test_initialization_missing_secrets)\nTest initialization failure with missing secrets\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 56, in test_initialization_missing_secrets\n    with self.assertRaises(SystemExit):\n         ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nAssertionError: SystemExit not raised\n\n======================================================================\nFAIL: test_initialization_success (test_auth_unit.TestAuthenticationManager.test_initialization_success)\nTest successful initialization of AuthenticationManager\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 47, in test_initialization_success\n    mock_create_client.assert_called_once()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 958, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'create_client' to have been called once. Called 0 times.\n\n======================================================================\nFAIL: test_sign_in_success (test_auth_unit.TestAuthenticationManager.test_sign_in_success)\nTest successful sign in\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 155, in test_sign_in_success\n    self.assertTrue(result.success)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\nAssertionError: False is not true\n\n======================================================================\nFAIL: test_sign_out (test_auth_unit.TestAuthenticationManager.test_sign_out)\nTest sign out functionality\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 170, in test_sign_out\n    self.mock_supabase_client.auth.sign_out.assert_called_once()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 958, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'sign_out' to have been called once. Called 0 times.\n\n======================================================================\nFAIL: test_sign_up_success (test_auth_unit.TestAuthenticationManager.test_sign_up_success)\nTest successful sign up\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 115, in test_sign_up_success\n    self.assertTrue(result.success)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\nAssertionError: False is not true\n\n======================================================================\nFAIL: test_protect_chat_interface_not_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_not_authenticated)\nTest chat interface protection for unauthenticated user\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 432, in test_protect_chat_interface_not_authenticated\n    self.assertFalse(result)\n    ~~~~~~~~~~~~~~~~^^^^^^^^\nAssertionError: <Mock name='mock.protect_route()' id='5602040128'> is not false\n\n----------------------------------------------------------------------\nRan 26 tests in 10.123s\n\nFAILED (failures=7, errors=10)\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 64, in run_all_tests\n    self.test_results[suite_key]['status'] = 'passed' if success else 'failed'\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\nKeyError: 'authentication_unit_tests'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 257, in <module>\n    exit(main())\n         ~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 247, in main\n    success = runner.run_all_tests()\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 75, in run_all_tests\n    self.test_results[suite_key]['status'] = 'error'\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\nKeyError: 'authentication_unit_tests'\n",
      "summary": "\u2705 Auth Tests: 4 passed, 0 failed",
      "error": "Error in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.042 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\ntest_get_current_user_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_authenticated)\nTest getting current user when authenticated ... FAIL\ntest_get_current_user_not_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_not_authenticated)\nTest getting current user when not authenticated ... ok\ntest_initialization_missing_secrets (test_auth_unit.TestAuthenticationManager.test_initialization_missing_secrets)\nTest initialization failure with missing secrets ... Error in configuration: authentication - 'SUPABASE_URL'\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - 'AuthenticationManager' object has no attribute 'supabase_url'\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.516 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.516 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nFAIL\ntest_initialization_success (test_auth_unit.TestAuthenticationManager.test_initialization_success)\nTest successful initialization of AuthenticationManager ... FAIL\ntest_is_authenticated (test_auth_unit.TestAuthenticationManager.test_is_authenticated)\nTest authentication status check ... ok\ntest_sign_in_success (test_auth_unit.TestAuthenticationManager.test_sign_in_success)\nTest successful sign in ... Error in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nLogin failed after 3 attempts: [Errno 8] nodename nor servname provided, or not known\nFAIL\ntest_sign_in_validation (test_auth_unit.TestAuthenticationManager.test_sign_in_validation)\nTest sign in validation ... ok\ntest_sign_out (test_auth_unit.TestAuthenticationManager.test_sign_out)\nTest sign out functionality ... FAIL\ntest_sign_up_success (test_auth_unit.TestAuthenticationManager.test_sign_up_success)\nTest successful sign up ... Error in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nRegistration failed after 3 attempts: [Errno 8] nodename nor servname provided, or not known\nFAIL\ntest_sign_up_validation_empty_fields (test_auth_unit.TestAuthenticationManager.test_sign_up_validation_empty_fields)\nTest sign up validation with empty fields ... ok\ntest_sign_up_validation_short_password (test_auth_unit.TestAuthenticationManager.test_sign_up_validation_short_password)\nTest sign up validation with short password ... ok\ntest_clear_session (test_auth_unit.TestSessionManager.test_clear_session)\nTest session clearing ... ERROR\ntest_get_user_id (test_auth_unit.TestSessionManager.test_get_user_id)\nTest getting user ID ... ERROR\ntest_get_user_session (test_auth_unit.TestSessionManager.test_get_user_session)\nTest getting user session ... ERROR\ntest_initialization (test_auth_unit.TestSessionManager.test_initialization)\nTest SessionManager initialization ... ERROR\ntest_initialize_session (test_auth_unit.TestSessionManager.test_initialize_session)\nTest session initialization ... ERROR\ntest_is_authenticated (test_auth_unit.TestSessionManager.test_is_authenticated)\nTest authentication status check ... ERROR\ntest_update_preferences (test_auth_unit.TestSessionManager.test_update_preferences)\nTest updating user preferences ... ERROR\ntest_validate_session (test_auth_unit.TestSessionManager.test_validate_session)\nTest session validation ... ERROR\ntest_get_current_user_id_authenticated (test_auth_unit.TestAuthGuard.test_get_current_user_id_authenticated)\nTest getting current user ID when authenticated ... ok\ntest_get_current_user_id_not_authenticated (test_auth_unit.TestAuthGuard.test_get_current_user_id_not_authenticated)\nTest getting current user ID when not authenticated ... ok\ntest_initialization (test_auth_unit.TestAuthGuard.test_initialization)\nTest AuthGuard initialization ... ok\ntest_require_authentication_failure (test_auth_unit.TestAuthGuard.test_require_authentication_failure)\nTest failed authentication requirement ... ERROR\ntest_require_authentication_success (test_auth_unit.TestAuthGuard.test_require_authentication_success)\nTest successful authentication requirement ... ERROR\ntest_protect_chat_interface_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_authenticated)\nTest chat interface protection for authenticated user ... ok\ntest_protect_chat_interface_not_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_not_authenticated)\nTest chat interface protection for unauthenticated user ... FAIL\n\n======================================================================\nERROR: test_clear_session (test_auth_unit.TestSessionManager.test_clear_session)\nTest session clearing\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 288, in test_clear_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_get_user_id (test_auth_unit.TestSessionManager.test_get_user_id)\nTest getting user ID\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 316, in test_get_user_id\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_get_user_session (test_auth_unit.TestSessionManager.test_get_user_session)\nTest getting user session\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 273, in test_get_user_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_initialization (test_auth_unit.TestSessionManager.test_initialization)\nTest SessionManager initialization\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 247, in test_initialization\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_initialize_session (test_auth_unit.TestSessionManager.test_initialize_session)\nTest session initialization\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 258, in test_initialize_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_is_authenticated (test_auth_unit.TestSessionManager.test_is_authenticated)\nTest authentication status check\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 304, in test_is_authenticated\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_update_preferences (test_auth_unit.TestSessionManager.test_update_preferences)\nTest updating user preferences\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 328, in test_update_preferences\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_validate_session (test_auth_unit.TestSessionManager.test_validate_session)\nTest session validation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 344, in test_validate_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_require_authentication_failure (test_auth_unit.TestAuthGuard.test_require_authentication_failure)\nTest failed authentication requirement\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 405, in test_require_authentication_failure\n    result = self.auth_guard.require_authentication()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AuthGuard' object has no attribute 'require_authentication'\n\n======================================================================\nERROR: test_require_authentication_success (test_auth_unit.TestAuthGuard.test_require_authentication_success)\nTest successful authentication requirement\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 397, in test_require_authentication_success\n    result = self.auth_guard.require_authentication()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AuthGuard' object has no attribute 'require_authentication'\n\n======================================================================\nFAIL: test_get_current_user_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_authenticated)\nTest getting current user when authenticated\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 194, in test_get_current_user_authenticated\n    self.assertIsNotNone(user)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^\nAssertionError: unexpectedly None\n\n======================================================================\nFAIL: test_initialization_missing_secrets (test_auth_unit.TestAuthenticationManager.test_initialization_missing_secrets)\nTest initialization failure with missing secrets\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 56, in test_initialization_missing_secrets\n    with self.assertRaises(SystemExit):\n         ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nAssertionError: SystemExit not raised\n\n======================================================================\nFAIL: test_initialization_success (test_auth_unit.TestAuthenticationManager.test_initialization_success)\nTest successful initialization of AuthenticationManager\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 47, in test_initialization_success\n    mock_create_client.assert_called_once()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 958, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'create_client' to have been called once. Called 0 times.\n\n======================================================================\nFAIL: test_sign_in_success (test_auth_unit.TestAuthenticationManager.test_sign_in_success)\nTest successful sign in\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 155, in test_sign_in_success\n    self.assertTrue(result.success)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\nAssertionError: False is not true\n\n======================================================================\nFAIL: test_sign_out (test_auth_unit.TestAuthenticationManager.test_sign_out)\nTest sign out functionality\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 170, in test_sign_out\n    self.mock_supabase_client.auth.sign_out.assert_called_once()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 958, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'sign_out' to have been called once. Called 0 times.\n\n======================================================================\nFAIL: test_sign_up_success (test_auth_unit.TestAuthenticationManager.test_sign_up_success)\nTest successful sign up\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 115, in test_sign_up_success\n    self.assertTrue(result.success)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\nAssertionError: False is not true\n\n======================================================================\nFAIL: test_protect_chat_interface_not_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_not_authenticated)\nTest chat interface protection for unauthenticated user\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 432, in test_protect_chat_interface_not_authenticated\n    self.assertFalse(result)\n    ~~~~~~~~~~~~~~~~^^^^^^^^\nAssertionError: <Mock name='mock.protect_route()' id='5602040128'> is not false\n\n----------------------------------------------------------------------\nRan 26 tests in 10.123s\n\nFAILED (failures=7, errors=10)\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 64, in run_all_tests\n    self.test_results[suite_key]['status'] = 'passed' if success else 'failed'\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\nKeyError: 'authentication_unit_tests'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 257, in <module>\n    exit(main())\n         ~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 247, in main\n    success = runner.run_all_tests()\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 75, in run_all_tests\n    self.test_results[suite_key]['status'] = 'error'\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\nKeyError: 'authentication_unit_tests'\n"
    },
    "Performance Verification": {
      "success": false,
      "duration": 5.1336989402771,
      "return_code": 1,
      "stdout": "\ud83d\ude80 Starting Task 14 Performance Optimization Verification\n============================================================\n\n\ud83d\udccb Performance Optimizer\n----------------------------------------\n\ud83d\udd0d Verifying Performance Optimizer...\n  \u2713 Testing cache functionality...\n  \u2705 Cache functionality verified\n  \u2713 Testing user data caching...\n  \u2705 User data caching verified\n  \u2713 Testing pagination helper...\n  \u2705 Pagination helper verified\n\n\ud83d\udccb Optimized Message Store\n----------------------------------------\n\ud83d\udd0d Verifying Optimized Message Store...\n  \u2705 Optimized message store structure verified\n\n\ud83d\udccb Chat Interface Optimizations\n----------------------------------------\n\ud83d\udd0d Verifying Optimized Chat Interface...\n  \u274c Optimized chat interface verification failed: \n\n\ud83d\udccb Vector Search Optimizations\n----------------------------------------\n\ud83d\udd0d Verifying Vector Search Optimizations...\n  \u2705 Vector search optimization structure verified\n\n\ud83d\udccb Performance Monitor\n----------------------------------------\n\ud83d\udd0d Verifying Performance Monitor...\n  \u2705 Performance monitor verified\n\n\ud83d\udccb Database Optimizations\n----------------------------------------\n\ud83d\udd0d Verifying Database Optimizations...\n  \u2705 Database optimization functions verified\n  \u26a0\ufe0f Database connection test failed (this is OK if not configured): Invalid URL\n\n\ud83d\udccb App Integration\n----------------------------------------\n\ud83d\udd0d Verifying App Integration...\n  \u274c Integration point not found: render_paginated_chat_history\n\n\ud83d\udccb Performance Benchmarks\n----------------------------------------\n\ud83d\udd0d Running Performance Benchmarks...\n  \ud83d\udcca Cache write performance: 0.003s for 1000 operations (335464 ops/sec)\n  \ud83d\udcca Cache read performance: 0.002s for 1000 operations (542882 ops/sec)\n  \ud83d\udcca Pagination performance: 0.000s for 10 pages (505338 pages/sec)\n\n============================================================\n\ud83d\udcca VERIFICATION SUMMARY\n============================================================\nPerformance Optimizer               \u2705 PASSED\nOptimized Message Store             \u2705 PASSED\nChat Interface Optimizations        \u274c FAILED\nVector Search Optimizations         \u2705 PASSED\nPerformance Monitor                 \u2705 PASSED\nDatabase Optimizations              \u2705 PASSED\nApp Integration                     \u274c FAILED\nPerformance Benchmarks              \u2705 PASSED\n------------------------------------------------------------\nTotal: 6/8 verifications passed (75.0%)\n\n\u26a0\ufe0f 2 verification(s) failed. Please review the issues above.\n",
      "stderr": "2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n",
      "summary": "\u274c Optimized chat interface verification failed:",
      "error": "2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n"
    },
    "Deployment Readiness": {
      "success": true,
      "duration": 9.499979972839355,
      "return_code": 0,
      "stdout": "\ud83d\ude80 Streamlit Cloud Deployment Verification\n==================================================\n\n\ud83d\udce6 Checking Dependencies...\n\n==================================================\nDependency Check\n==================================================\nstreamlit                      \u2705 PASS\nsupabase                       \u2705 PASS\nlangchain                      \u2705 PASS\ngroq                           \u2705 PASS\nsentence_transformers          \u2705 PASS\npsutil                         \u2705 PASS\nnumpy                          \u2705 PASS\npandas                         \u2705 PASS\n\n\ud83d\udd27 Checking Application Modules...\n\n==================================================\nApplication Module Check\n==================================================\nauth_manager                   \u2705 PASS\nsession_manager                \u2705 PASS\nchat_manager                   \u2705 PASS\nmessage_store                  \u2705 PASS\nmodel_manager                  \u2705 PASS\ntheme_manager                  \u2705 PASS\nrag_orchestrator_optimized     \u2705 PASS\nvector_retriever               \u2705 PASS\ndocument_processor             \u2705 PASS\ndeployment_config              \u2705 PASS\nhealth_check                   \u2705 PASS\n\n\u2699\ufe0f  Checking Configuration...\n\n==================================================\nConfiguration Check\n==================================================\nconfig_loaded                  \u2705 PASS\nenvironment                    development\nis_production                  \u274c FAIL\ndatabase_config                \u2705 PASS\nmodel_config                   \u2705 PASS\ndatabase                       \u274c FAIL\ngroq_api                       \u274c FAIL\n\n\ud83d\udcc4 Checking Streamlit Files...\n\n==================================================\nStreamlit File Check\n==================================================\n.streamlit/config.toml         \u2705 PASS\nrequirements.txt               \u2705 PASS\napp.py                         \u2705 PASS\nDEPLOYMENT_GUIDE.md            \u2705 PASS\n\n\ud83c\udfe5 Running Health Checks...\n\n==================================================\nHealth Check\n==================================================\noverall_status                 unhealthy\nindividual_checks:\n  database                     unhealthy\n  groq_api                     unhealthy\n  system_resources             healthy\n  application                  healthy\nhealth_check_available         \u2705 PASS\n\n==================================================\n\ud83c\udf89 DEPLOYMENT VERIFICATION PASSED\nYour application is ready for Streamlit Cloud deployment!\n==================================================\n\n\ud83d\udccb Next Steps:\n1. Push your code to GitHub\n2. Deploy to Streamlit Cloud\n3. Configure secrets in Streamlit Cloud dashboard\n4. Test your deployed application\n5. Monitor health at: https://your-app.streamlit.app/?page=health&token=your_token\n",
      "stderr": "2025-09-27 00:02:02,007 - root - ERROR - Database validation failed: Invalid URL\n2025-09-27 00:02:04,063 - httpx - INFO - HTTP Request: GET https://api.groq.com/openai/v1/models \"HTTP/1.1 401 Unauthorized\"\n2025-09-27 00:02:04,064 - root - ERROR - Groq API validation failed: Error code: 401 - {'error': {'message': 'Invalid API Key', 'type': 'invalid_request_error', 'code': 'invalid_api_key'}}\n2025-09-27 00:02:04,766 - httpx - INFO - HTTP Request: GET https://api.groq.com/openai/v1/models \"HTTP/1.1 401 Unauthorized\"\n",
      "summary": "2025-09-27 00:02:04,064 - root - ERROR - Groq API validation failed: Error code: 401 - {'error': {'message': 'Invalid API Key', 'type': 'invalid_request_error', 'code': 'invalid_api_key'}}",
      "error": null
    }
  },
  "timestamp": "2025-09-27T00:02:06.558235",
  "validation_results": {
    "ui_enhancements_integrated": false,
    "complete_workflow_tested": false,
    "conversation_management_validated": false,
    "dark_theme_consistent": false,
    "model_toggle_functional": false,
    "unlimited_history_working": false,
    "rag_pipeline_functional": false,
    "performance_optimized": false,
    "deployment_ready": true
  },
  "recommendations": [
    "\ud83d\udd27 Address the following issues before considering Task 15 complete:",
    "   - UI Enhancements Integration: ",
    "   - Complete Workflow Integration: ",
    "   - Application Integration Validation: 2025-09-27 00:01:06.165 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:06.166 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:10.667 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:11.103 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.106 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.107 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:11.108 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n",
    "   - Final Integration Tests: 2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:12.485 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n",
    "   - Comprehensive Test Suite: Error in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.042 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.048 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.049 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.050 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - Invalid URL\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.051 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.052 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\ntest_get_current_user_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_authenticated)\nTest getting current user when authenticated ... FAIL\ntest_get_current_user_not_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_not_authenticated)\nTest getting current user when not authenticated ... ok\ntest_initialization_missing_secrets (test_auth_unit.TestAuthenticationManager.test_initialization_missing_secrets)\nTest initialization failure with missing secrets ... Error in configuration: authentication - 'SUPABASE_URL'\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nError in initialization: authentication - 'AuthenticationManager' object has no attribute 'supabase_url'\n2025-09-27 00:01:41.515 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.516 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:41.516 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\nFAIL\ntest_initialization_success (test_auth_unit.TestAuthenticationManager.test_initialization_success)\nTest successful initialization of AuthenticationManager ... FAIL\ntest_is_authenticated (test_auth_unit.TestAuthenticationManager.test_is_authenticated)\nTest authentication status check ... ok\ntest_sign_in_success (test_auth_unit.TestAuthenticationManager.test_sign_in_success)\nTest successful sign in ... Error in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_in: authentication - [Errno 8] nodename nor servname provided, or not known\nLogin failed after 3 attempts: [Errno 8] nodename nor servname provided, or not known\nFAIL\ntest_sign_in_validation (test_auth_unit.TestAuthenticationManager.test_sign_in_validation)\nTest sign in validation ... ok\ntest_sign_out (test_auth_unit.TestAuthenticationManager.test_sign_out)\nTest sign out functionality ... FAIL\ntest_sign_up_success (test_auth_unit.TestAuthenticationManager.test_sign_up_success)\nTest successful sign up ... Error in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nError in sign_up: authentication - [Errno 8] nodename nor servname provided, or not known\nRegistration failed after 3 attempts: [Errno 8] nodename nor servname provided, or not known\nFAIL\ntest_sign_up_validation_empty_fields (test_auth_unit.TestAuthenticationManager.test_sign_up_validation_empty_fields)\nTest sign up validation with empty fields ... ok\ntest_sign_up_validation_short_password (test_auth_unit.TestAuthenticationManager.test_sign_up_validation_short_password)\nTest sign up validation with short password ... ok\ntest_clear_session (test_auth_unit.TestSessionManager.test_clear_session)\nTest session clearing ... ERROR\ntest_get_user_id (test_auth_unit.TestSessionManager.test_get_user_id)\nTest getting user ID ... ERROR\ntest_get_user_session (test_auth_unit.TestSessionManager.test_get_user_session)\nTest getting user session ... ERROR\ntest_initialization (test_auth_unit.TestSessionManager.test_initialization)\nTest SessionManager initialization ... ERROR\ntest_initialize_session (test_auth_unit.TestSessionManager.test_initialize_session)\nTest session initialization ... ERROR\ntest_is_authenticated (test_auth_unit.TestSessionManager.test_is_authenticated)\nTest authentication status check ... ERROR\ntest_update_preferences (test_auth_unit.TestSessionManager.test_update_preferences)\nTest updating user preferences ... ERROR\ntest_validate_session (test_auth_unit.TestSessionManager.test_validate_session)\nTest session validation ... ERROR\ntest_get_current_user_id_authenticated (test_auth_unit.TestAuthGuard.test_get_current_user_id_authenticated)\nTest getting current user ID when authenticated ... ok\ntest_get_current_user_id_not_authenticated (test_auth_unit.TestAuthGuard.test_get_current_user_id_not_authenticated)\nTest getting current user ID when not authenticated ... ok\ntest_initialization (test_auth_unit.TestAuthGuard.test_initialization)\nTest AuthGuard initialization ... ok\ntest_require_authentication_failure (test_auth_unit.TestAuthGuard.test_require_authentication_failure)\nTest failed authentication requirement ... ERROR\ntest_require_authentication_success (test_auth_unit.TestAuthGuard.test_require_authentication_success)\nTest successful authentication requirement ... ERROR\ntest_protect_chat_interface_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_authenticated)\nTest chat interface protection for authenticated user ... ok\ntest_protect_chat_interface_not_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_not_authenticated)\nTest chat interface protection for unauthenticated user ... FAIL\n\n======================================================================\nERROR: test_clear_session (test_auth_unit.TestSessionManager.test_clear_session)\nTest session clearing\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 288, in test_clear_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_get_user_id (test_auth_unit.TestSessionManager.test_get_user_id)\nTest getting user ID\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 316, in test_get_user_id\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_get_user_session (test_auth_unit.TestSessionManager.test_get_user_session)\nTest getting user session\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 273, in test_get_user_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_initialization (test_auth_unit.TestSessionManager.test_initialization)\nTest SessionManager initialization\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 247, in test_initialization\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_initialize_session (test_auth_unit.TestSessionManager.test_initialize_session)\nTest session initialization\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 258, in test_initialize_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_is_authenticated (test_auth_unit.TestSessionManager.test_is_authenticated)\nTest authentication status check\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 304, in test_is_authenticated\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_update_preferences (test_auth_unit.TestSessionManager.test_update_preferences)\nTest updating user preferences\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 328, in test_update_preferences\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_validate_session (test_auth_unit.TestSessionManager.test_validate_session)\nTest session validation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 344, in test_validate_session\n    session_manager = SessionManager(self.mock_auth_manager)\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 32, in __init__\n    self._initialize_session_state()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/session_manager.py\", line 37, in _initialize_session_state\n    st.session_state.user_session = None\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'user_session' and no __dict__ for setting new attributes\n\n======================================================================\nERROR: test_require_authentication_failure (test_auth_unit.TestAuthGuard.test_require_authentication_failure)\nTest failed authentication requirement\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 405, in test_require_authentication_failure\n    result = self.auth_guard.require_authentication()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AuthGuard' object has no attribute 'require_authentication'\n\n======================================================================\nERROR: test_require_authentication_success (test_auth_unit.TestAuthGuard.test_require_authentication_success)\nTest successful authentication requirement\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 397, in test_require_authentication_success\n    result = self.auth_guard.require_authentication()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AuthGuard' object has no attribute 'require_authentication'\n\n======================================================================\nFAIL: test_get_current_user_authenticated (test_auth_unit.TestAuthenticationManager.test_get_current_user_authenticated)\nTest getting current user when authenticated\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 194, in test_get_current_user_authenticated\n    self.assertIsNotNone(user)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^\nAssertionError: unexpectedly None\n\n======================================================================\nFAIL: test_initialization_missing_secrets (test_auth_unit.TestAuthenticationManager.test_initialization_missing_secrets)\nTest initialization failure with missing secrets\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 56, in test_initialization_missing_secrets\n    with self.assertRaises(SystemExit):\n         ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nAssertionError: SystemExit not raised\n\n======================================================================\nFAIL: test_initialization_success (test_auth_unit.TestAuthenticationManager.test_initialization_success)\nTest successful initialization of AuthenticationManager\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 47, in test_initialization_success\n    mock_create_client.assert_called_once()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 958, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'create_client' to have been called once. Called 0 times.\n\n======================================================================\nFAIL: test_sign_in_success (test_auth_unit.TestAuthenticationManager.test_sign_in_success)\nTest successful sign in\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 155, in test_sign_in_success\n    self.assertTrue(result.success)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\nAssertionError: False is not true\n\n======================================================================\nFAIL: test_sign_out (test_auth_unit.TestAuthenticationManager.test_sign_out)\nTest sign out functionality\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 170, in test_sign_out\n    self.mock_supabase_client.auth.sign_out.assert_called_once()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 958, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'sign_out' to have been called once. Called 0 times.\n\n======================================================================\nFAIL: test_sign_up_success (test_auth_unit.TestAuthenticationManager.test_sign_up_success)\nTest successful sign up\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 115, in test_sign_up_success\n    self.assertTrue(result.success)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\nAssertionError: False is not true\n\n======================================================================\nFAIL: test_protect_chat_interface_not_authenticated (test_auth_unit.TestRouteProtection.test_protect_chat_interface_not_authenticated)\nTest chat interface protection for unauthenticated user\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/mac/miniconda3/lib/python3.13/unittest/mock.py\", line 1426, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/mac/Desktop/PharmGPT/test_auth_unit.py\", line 432, in test_protect_chat_interface_not_authenticated\n    self.assertFalse(result)\n    ~~~~~~~~~~~~~~~~^^^^^^^^\nAssertionError: <Mock name='mock.protect_route()' id='5602040128'> is not false\n\n----------------------------------------------------------------------\nRan 26 tests in 10.123s\n\nFAILED (failures=7, errors=10)\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 64, in run_all_tests\n    self.test_results[suite_key]['status'] = 'passed' if success else 'failed'\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\nKeyError: 'authentication_unit_tests'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 257, in <module>\n    exit(main())\n         ~~~~^^\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 247, in main\n    success = runner.run_all_tests()\n  File \"/Users/mac/Desktop/PharmGPT/run_comprehensive_tests.py\", line 75, in run_all_tests\n    self.test_results[suite_key]['status'] = 'error'\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\nKeyError: 'authentication_unit_tests'\n",
    "   - Performance Verification: 2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.134 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.368 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n2025-09-27 00:01:52.369 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.\n",
    "\ud83e\uddea Re-run tests after fixing issues",
    "\ud83d\udccb Review integration points between failed components",
    "\ud83d\udd0d Check for missing dependencies or configuration issues",
    "\ud83d\udca1 Consider implementing additional error handling",
    "\ud83d\udcd6 Update documentation for any changed interfaces",
    "\ud83c\udfa8 Ensure all UI enhancements are properly integrated",
    "\ud83d\udd04 Validate complete document-to-response workflow",
    "\ud83d\udcac Test conversation management and isolation"
  ]
}