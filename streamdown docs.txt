# Introduction

Streamdown is a React component library that makes rendering streaming Markdown content seamless and beautiful. Built specifically for AI-powered applications, it handles the unique challenges that arise when Markdown is tokenized and streamed in real-time.

## The Problem with Streaming Markdown

When you stream Markdown content from AI models, new challenges emerge that traditional Markdown renderers weren't designed to handle:

* **Incomplete syntax** - Bold text that hasn't been closed yet: `**This is bol`
* **Partial code blocks** - Code blocks missing their closing backticks
* **Unterminated links** - Links without closing brackets: `[Click here`
* **Progressive rendering** - Content that updates token-by-token

Traditional Markdown renderers like `react-markdown` will either render these incomplete elements incorrectly or not at all, creating a jarring user experience.

## The Streamdown Solution

Streamdown intelligently handles incomplete Markdown by:

1. **Parsing incomplete blocks** - Automatically detects and completes unterminated Markdown syntax
2. **Progressive formatting** - Applies styling to partial content as it streams in
3. **Seamless transitions** - Smoothly updates from incomplete to complete states
4. **Zero configuration** - Works out of the box with sensible defaults

# Getting Started

Get up and running with Streamdown in minutes. This guide will walk you through installation, configuration, and your first implementation.

## Requirements

* **Node.js** >= 18
* **React** >= 19.1.1 (compatible with React 18+)
* **Tailwind CSS** (for styling)

## Installation

You can install Streamdown directly, or use it as part of the [AI Elements](https://ai-sdk.dev/elements) library.

### AI Elements

Install the `message` component from AI Elements:

<CodeBlockTabs defaultValue="npm">
  <CodeBlockTabsList>
    <CodeBlockTabsTrigger value="npm">
      npm
    </CodeBlockTabsTrigger>

    <CodeBlockTabsTrigger value="pnpm">
      pnpm
    </CodeBlockTabsTrigger>

    <CodeBlockTabsTrigger value="yarn">
      yarn
    </CodeBlockTabsTrigger>

    <CodeBlockTabsTrigger value="bun">
      bun
    </CodeBlockTabsTrigger>
  </CodeBlockTabsList>

  <CodeBlockTab value="npm">
    ```bash
    npx ai-elements@latest add message
    ```
  </CodeBlockTab>

  <CodeBlockTab value="pnpm">
    ```bash
    pnpm dlx ai-elements@latest add message
    ```
  </CodeBlockTab>

  <CodeBlockTab value="yarn">
    ```bash
    yarn dlx ai-elements@latest add message
    ```
  </CodeBlockTab>

  <CodeBlockTab value="bun">
    ```bash
    bun x ai-elements@latest add message
    ```
  </CodeBlockTab>
</CodeBlockTabs>

### Direct Installation

Install Streamdown using your preferred package manager:

<CodeBlockTabs defaultValue="npm">
  <CodeBlockTabsList>
    <CodeBlockTabsTrigger value="npm">
      npm
    </CodeBlockTabsTrigger>

    <CodeBlockTabsTrigger value="pnpm">
      pnpm
    </CodeBlockTabsTrigger>

    <CodeBlockTabsTrigger value="yarn">
      yarn
    </CodeBlockTabsTrigger>

    <CodeBlockTabsTrigger value="bun">
      bun
    </CodeBlockTabsTrigger>
  </CodeBlockTabsList>

  <CodeBlockTab value="npm">
    ```bash
    npm i streamdown
    ```
  </CodeBlockTab>

  <CodeBlockTab value="pnpm">
    ```bash
    pnpm add streamdown
    ```
  </CodeBlockTab>

  <CodeBlockTab value="yarn">
    ```bash
    yarn add streamdown
    ```
  </CodeBlockTab>

  <CodeBlockTab value="bun">
    ```bash
    bun add streamdown
    ```
  </CodeBlockTab>
</CodeBlockTabs>

## Tailwind CSS Configuration

Streamdown uses Tailwind CSS for styling. To ensure the styles are properly applied, you need to configure your Tailwind setup to include Streamdown's source files.

### Tailwind v4

Add the following CSS source directive to your `globals.css` or main CSS file:

```css title="globals.css"
@source "../node_modules/streamdown/dist/*.js";
```

Make sure the path matches the location of your `node_modules` folder relative to your CSS file.

### Tailwind v3

Add Streamdown to your `content` array in your `tailwind.config.js`:

```js title="tailwind.config.js"
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './node_modules/streamdown/dist/*.js',
  ],
  // ... rest of your config
}
```

# Usage

Streamdown is a drop-in replacement for `react-markdown`, so you can use it just like you would use `react-markdown`.

## Basic Usage

Import and use the `Streamdown` component in your React application:

```tsx title="app/page.tsx"
import { Streamdown } from 'streamdown';

export default function Page() {
  const markdown = "# Hello World\n\nThis is **streaming** markdown!";

  return <Streamdown>{markdown}</Streamdown>;
}
```

That's it! Streamdown will render your Markdown with all the built-in features enabled.

## With AI Streaming

Streamdown really shines when used with AI streaming. Here's an example using the Vercel AI SDK:

```tsx title="app/page.tsx"
'use client';

import { useChat } from '@ai-sdk/react';
import { Streamdown } from 'streamdown';

export default function ChatPage() {
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat();

  return (
    <div className="flex flex-col h-screen">
      <div className="flex-1 overflow-y-auto p-4 space-y-4">
        {messages.map((message) => (
          <div
            key={message.id}
            className={message.role === 'user' ? 'text-right' : 'text-left'}
          >
            <div className="inline-block max-w-2xl">
              <Streamdown isAnimating={isLoading && message.role === 'assistant'}>
                {message.content}
              </Streamdown>
            </div>
          </div>
        ))}
      </div>

      <form onSubmit={handleSubmit} className="p-4 border-t">
        <input
          value={input}
          onChange={handleInputChange}
          placeholder="Ask me anything..."
          className="w-full px-4 py-2 border rounded-lg"
          disabled={isLoading}
        />
      </form>
    </div>
  );
}
```
# Configuration

Streamdown can be configured to suit your needs. This guide will walk you through the available options and how to configure them.

## Core Props

<TypeTable
  type={{
  children: {
    description: 'The Markdown content to render',
    type: 'string',
  },
  parseIncompleteMarkdown: {
    description: 'Enable parsing and styling of unterminated Markdown blocks',
    type: 'boolean',
    default: 'true',
  },
  isAnimating: {
    description: 'Indicates if content is currently streaming (disables copy buttons)',
    type: 'boolean',
    default: 'false',
  },
  className: {
    description: 'CSS class for the container element',
    type: 'string',
  },
  mode: {
    description: 'Mode of the Streamdown component',
    type: '"streaming" | "static"',
    default: 'streaming',
    options: [
      'streaming',
      'static',
    ],
  }
}}
/>

## Styling Props

<TypeTable
  type={{
  shikiTheme: {
    description: 'Light and dark themes for code syntax highlighting',
    type: '[BundledTheme, BundledTheme]',
    default: "['github-light', 'github-dark']",
  },
  components: {
    description: 'Custom component overrides for Markdown elements',
    type: 'object',
  },
}}
/>

## Plugin Props

<TypeTable
  type={{
  rehypePlugins: {
    description: 'Rehype plugins for HTML processing',
    type: 'Pluggable[]',
    default: 'Object.values(defaultRehypePlugins)',
  },
  remarkPlugins: {
    description: 'Remark plugins for Markdown processing',
    type: 'Pluggable[]',
    default: 'Object.values(defaultRemarkPlugins)',
  },
}}
/>

**Default Rehype Plugins:**

* `rehype-harden` - Security hardening (allows all image and link prefixes, data images enabled)
* `rehype-raw` - HTML support
* `rehype-katex` - Math rendering with KaTeX

**Default Remark Plugins:**

* `remark-gfm` - GitHub Flavored Markdown
* `remark-math` - Math syntax support (single dollar text math disabled)
* `remark-cjk-friendly` - CJK (Chinese, Japanese, Korean) text support
* `remark-cjk-friendly-gfm-strikethrough` - CJK-friendly GFM strikethrough support

## Feature-Specific Props

<TypeTable
  type={{
  mermaid: {
    description: 'Mermaid diagram configuration and error handling',
    type: 'MermaidOptions',
  },
  controls: {
    description: 'Control visibility of interactive buttons',
    type: 'ControlsConfig',
    default: 'true',
  },
}}
/>

### Mermaid Options

The `mermaid` prop accepts an object with the following properties:

<TypeTable
  type={{
  config: {
    description: 'Custom configuration for Mermaid diagrams',
    type: 'MermaidConfig',
  },
  errorComponent: {
    description: 'Custom React component for handling Mermaid rendering errors',
    type: 'React.ComponentType<MermaidErrorComponentProps>',
  },
}}
/>

## Advanced Props

<TypeTable
  type={{
  BlockComponent: {
    description: 'Custom block component for rendering individual markdown blocks',
    type: 'React.ComponentType<BlockProps>',
    default: 'Block',
  },
  parseMarkdownIntoBlocksFn: {
    description: 'Custom function to parse markdown into blocks',
    type: '(markdown: string) => string[]',
    default: 'parseMarkdownIntoBlocks',
  },
}}
/>

The `controls` prop can be configured granularly:

```tsx title="app/page.tsx"
<Streamdown
  controls={{
    table: true,        // Show table download button
    code: true,         // Show code copy button
    mermaid: {
      download: true,   // Show mermaid download button
      copy: true,       // Show mermaid copy button
      fullscreen: true, // Show mermaid fullscreen button
      panZoom: true     // Show mermaid pan/zoom controls
    }
  }}
>
  {markdown}
</Streamdown>
```
# Styling

Streamdown is designed to be flexible and customizable, allowing you to adapt its appearance to match your application's design system. This guide covers the various ways you can modify Streamdown's styles to suit your needs.

## CSS Variables (Recommended)

Streamdown components are built using shadcn/ui's design system, which means they use CSS variables for theming. This is the simplest way to customize colors, borders, and other design tokens across all Streamdown components.

### Setting Up Variables

Add or modify the CSS variables in your `globals.css` file:

```css title="app/globals.css"
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}
```

### Variables Used by Streamdown

Streamdown components primarily use these CSS variables:

| Variable               | Usage                               | Example Elements                      |
| ---------------------- | ----------------------------------- | ------------------------------------- |
| `--primary`            | Links, accent colors                | Links (`<a>`)                         |
| `--primary-foreground` | Text on primary backgrounds         | N/A                                   |
| `--muted`              | Subtle backgrounds                  | Code blocks, table headers            |
| `--muted-foreground`   | De-emphasized text                  | Blockquote text                       |
| `--border`             | Borders and dividers                | Tables, horizontal rules, code blocks |
| `--ring`               | Focus rings on interactive elements | Buttons (copy, download)              |
| `--radius`             | Border radius                       | Code blocks, tables, buttons          |

### Quick Theme Examples

**Minimal Gray Theme:**

```css title="app/globals.css"
:root {
  --primary: 0 0% 20%;
  --muted: 0 0% 96%;
  --border: 0 0% 90%;
  --radius: 0.25rem;
}
```

**Vibrant Blue Theme:**

```css title="app/globals.css"
:root {
  --primary: 217 91% 60%;
  --muted: 214 100% 97%;
  --border: 214 32% 91%;
  --radius: 0.75rem;
}
```

**No Borders Theme:**

```css title="app/globals.css"
:root {
  --border: transparent;
  --muted: 0 0% 98%;
  --radius: 0rem;
}
```

## Custom Components

The most powerful way to customize Streamdown's appearance is by providing custom component overrides. This allows you to replace any Markdown element with your own React component while maintaining all of Streamdown's functionality.

### Basic Usage

Pass custom components using the `components` prop:

```tsx title="app/page.tsx"
<Streamdown
  components={{
    h1: ({ children }) => (
      <h1 className="text-4xl font-bold text-blue-600">
        {children}
      </h1>
    ),
    h2: ({ children }) => (
      <h2 className="text-3xl font-semibold text-blue-500">
        {children}
      </h2>
    ),
    p: ({ children }) => (
      <p className="text-gray-700 leading-relaxed">
        {children}
      </p>
    ),
  }}
>
  {markdown}
</Streamdown>
```

### Available Components

You can override any of the following components:

* **Headings**: `h1`, `h2`, `h3`, `h4`, `h5`, `h6`
* **Text**: `p`, `strong`, `em`
* **Lists**: `ul`, `ol`, `li`
* **Links**: `a`
* **Code**: `code`, `pre`
* **Quotes**: `blockquote`
* **Tables**: `table`, `thead`, `tbody`, `tr`, `th`, `td`
* **Media**: `img`
* **Other**: `hr`, `sup`, `sub`, `section`

### Component Props

Custom components receive all the props that the default components would receive, including:

* `children` - The content to render
* `className` - CSS class names (if applicable)
* `node` - The Markdown AST node (for advanced use cases)
* Element-specific props (e.g., `href` for links, `src` for images)

```tsx title="app/page.tsx"
<Streamdown
  components={{
    a: ({ href, children, ...props }) => (
      <a
        href={href}
        className="text-purple-600 hover:text-purple-800 underline"
        {...props}
      >
        {children} ğŸ”—
      </a>
    ),
  }}
>
  {markdown}
</Streamdown>
```

## Global CSS Targeting

For simpler styling needs, you can use global CSS to target Streamdown elements using the `data-streamdown` attribute. Every Streamdown element includes a unique `data-streamdown` attribute that makes it easy to apply custom styles.

### Available Selectors

Target specific Streamdown elements using these data attributes:

```css title="styles/streamdown.css"
/* Headings */
[data-streamdown="heading-1"] { }
[data-streamdown="heading-2"] { }
[data-streamdown="heading-3"] { }
[data-streamdown="heading-4"] { }
[data-streamdown="heading-5"] { }
[data-streamdown="heading-6"] { }

/* Text elements */
[data-streamdown="strong"] { }
[data-streamdown="link"] { }
[data-streamdown="inline-code"] { }

/* Lists */
[data-streamdown="ordered-list"] { }
[data-streamdown="unordered-list"] { }
[data-streamdown="list-item"] { }

/* Blocks */
[data-streamdown="blockquote"] { }
[data-streamdown="horizontal-rule"] { }

/* Code */
[data-streamdown="code-block"] { }
[data-streamdown="mermaid-block"] { }

/* Tables */
[data-streamdown="table-wrapper"] { }
[data-streamdown="table"] { }
[data-streamdown="table-header"] { }
[data-streamdown="table-body"] { }
[data-streamdown="table-row"] { }
[data-streamdown="table-header-cell"] { }
[data-streamdown="table-cell"] { }

/* Other */
[data-streamdown="superscript"] { }
[data-streamdown="subscript"] { }
```

### Example Usage

Here's a practical example of customizing Streamdown styles with CSS:

```css title="styles/streamdown.css"
/* Custom heading styles */
[data-streamdown="heading-1"] {
  color: #1a202c;
  border-bottom: 2px solid #e2e8f0;
  padding-bottom: 0.5rem;
}

[data-streamdown="heading-2"] {
  color: #2d3748;
  margin-top: 2rem;
}

/* Custom link appearance */
[data-streamdown="link"] {
  color: #3182ce;
  text-decoration: none;
  border-bottom: 1px solid #90cdf4;
  transition: border-color 0.2s;
}

[data-streamdown="link"]:hover {
  border-bottom-color: #3182ce;
}

/* Custom code block styling */
[data-streamdown="code-block"] {
  border-radius: 0.5rem;
  border: 1px solid #e2e8f0;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Custom table styling */
[data-streamdown="table"] {
  border-radius: 0.5rem;
  overflow: hidden;
}

[data-streamdown="table-header"] {
  background: linear-gradient(to bottom, #f7fafc, #edf2f7);
}

/* Custom blockquote styling */
[data-streamdown="blockquote"] {
  background-color: #f7fafc;
  border-left-color: #4299e1;
  border-radius: 0.25rem;
}
```

### Scoped Styling

You can scope your styles to specific instances of Streamdown by using the `className` prop:

```tsx title="app/page.tsx"
<Streamdown className="docs-content">
  {markdown}
</Streamdown>
```

```css title="styles/streamdown.css"
/* Styles only apply to this specific instance */
.docs-content [data-streamdown="heading-1"] {
  font-family: 'Inter', sans-serif;
  letter-spacing: -0.02em;
}

.docs-content [data-streamdown="code-block"] {
  font-family: 'Fira Code', monospace;
}
```

## Combining Approaches

For maximum flexibility, you can combine both approaches - using custom components for structural changes and CSS for visual styling:

```tsx title="app/page.tsx"
<Streamdown
  className="custom-markdown"
  components={{
    h1: ({ children, ...props }) => (
      <h1 {...props}>
        <span className="heading-icon">ğŸ“–</span>
        {children}
      </h1>
    ),
  }}
>
  {markdown}
</Streamdown>
```

```css title="styles/streamdown.css"
.custom-markdown [data-streamdown="heading-1"] {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.custom-markdown .heading-icon {
  font-size: 1.5rem;
}
```

## Additional Styling Props

Beyond component overrides and CSS, Streamdown provides additional styling-related props:

### Container Class Name

Use the `className` prop to add custom classes to the Streamdown container:

```tsx title="app/page.tsx"
<Streamdown className="prose prose-lg dark:prose-invert max-w-none">
  {markdown}
</Streamdown>
```

### Syntax Highlighting Themes

Customize code block appearance with Shiki themes:

```tsx title="app/page.tsx"
<Streamdown
  shikiTheme={['github-light', 'github-dark']}
>
  {markdown}
</Streamdown>
```

See the [Code Blocks](/docs/code-blocks) documentation for more details on syntax highlighting customization.

## Best Practices

When customizing Streamdown styles, consider these best practices:

1. **Start with CSS Variables** - For most theming needs (colors, borders, radius), modifying CSS variables in `globals.css` is the simplest and most maintainable approach.

2. **Use `data-streamdown` Selectors for Specific Elements** - When you need to target individual elements without affecting the entire theme, use the `data-streamdown` attribute selectors.

3. **Use Custom Components for Structural Changes** - When you need to change the HTML structure or add wrapper elements, use the `components` prop.

4. **Maintain Accessibility** - Ensure your custom styles maintain proper color contrast, focus states, and semantic HTML structure.

5. **Test During Streaming** - Verify that your custom styles work well with incomplete content during streaming.

6. **Scope Your Styles** - Use the `className` prop to scope styles and avoid conflicts with other parts of your application.

7. **Preserve Animations** - Streamdown includes built-in animations for smooth streaming. Be careful not to override animation-related classes unless intentional.

## Styling Priority

The three styling approaches have the following priority (highest to lowest):

1. **Custom Components** - Complete control over rendering
2. **CSS via `data-streamdown` selectors** - Element-specific styling
3. **CSS Variables** - Global theme tokens

# CJK Language Support

Streamdown includes built-in support for CJK (Chinese, Japanese, Korean) languages, ensuring that emphasis markers like bold and italic work correctly with ideographic punctuation. This is particularly important for AI-generated content, where language models naturally place emphasis markers around phrases that include or end with punctuation.

## The Problem

The CommonMark/GFM specification has a [limitation](https://github.com/commonmark/commonmark-spec/issues/650) where emphasis markers (`**` or `*`) adjacent to ideographic punctuation marks occasionally fail to be recognized. This causes formatting to break in CJK text:

```markdown
**ã“ã®æ–‡ã¯å¤ªå­—ã«ãªã‚Šã¾ã›ã‚“ï¼ˆThis won't be boldedï¼‰ã€‚**ã“ã®æ–‡ã®ã›ã„ã§ï¼ˆIt is due to this sentenceï¼‰ã€‚
```

Without CJK-friendly parsing, the text above would render as plain text instead of bold because the closing `**` appears next to the Japanese period.

## The Solution

Streamdown uses the [remark-cjk-friendly](https://www.npmjs.com/package/remark-cjk-friendly) and [remark-cjk-friendly-gfm-strikethrough](https://www.npmjs.com/package/remark-cjk-friendly-gfm-strikethrough) plugins to handle CJK text properly. This plugin implements an improved parsing approach that correctly recognizes emphasis markers adjacent to ideographic punctuation.

## Supported Features

### Bold Text with Punctuation

Works correctly with all ideographic punctuation marks:

```markdown
**æ—¥æœ¬èªã®æ–‡ç« ï¼ˆæ‹¬å¼§ä»˜ãï¼‰ã€‚**ã“ã®æ–‡ãŒå¾Œã«ç¶šã„ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚
**ä¸­æ–‡æ–‡æœ¬ï¼ˆå¸¦æ‹¬å·ï¼‰ã€‚**è¿™å¥å­ç»§ç»­ä¹Ÿæ²¡é—®é¢˜ã€‚
**í•œêµ­ì–´ êµ¬ë¬¸(ê´„í˜¸ í¬í•¨)**ì„ ê°•ì¡°.
```

{/* The following lang="..." is crucial to ensure proper han character rendering */}

Japanese: <span lang="ja"><strong>æ—¥æœ¬èªã®æ–‡ç« ï¼ˆæ‹¬å¼§ä»˜ãï¼‰ã€‚</strong>ã“ã®æ–‡ãŒå¾Œã«ç¶šã„ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚</span>

Chinese: <span lang="zh-Hans"><strong>ä¸­æ–‡æ–‡æœ¬ï¼ˆå¸¦æ‹¬å·ï¼‰ã€‚</strong>è¿™å¥å­ç»§ç»­ä¹Ÿæ²¡é—®é¢˜ã€‚</span>

Korean: <span lang="ko"><strong>í•œêµ­ì–´ êµ¬ë¬¸(ê´„í˜¸ í¬í•¨)</strong>ì„ ê°•ì¡°.</span>

### Italic Text with Punctuation

```markdown
*ã“ã‚Œã¯æ–œä½“ã®ãƒ†ã‚­ã‚¹ãƒˆã§ã™ï¼ˆæ‹¬å¼§ä»˜ãï¼‰ã€‚*ã“ã®æ–‡ãŒå¾Œã«ç¶šã„ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚
*è¿™æ˜¯æ–œä½“æ–‡å­—ï¼ˆå¸¦æ‹¬å·ï¼‰ã€‚*è¿™å¥å­ç»§ç»­ä¹Ÿæ²¡é—®é¢˜ã€‚
*ì´ í…ìŠ¤íŠ¸(ê´„í˜¸ í¬í•¨)*ëŠ” ê¸°ìš¸ì„ê¼´ì…ë‹ˆë‹¤.
```

Japanese: <span lang="ja"><em>ã“ã‚Œã¯æ–œä½“ã®ãƒ†ã‚­ã‚¹ãƒˆã§ã™ï¼ˆæ‹¬å¼§ä»˜ãï¼‰ã€‚</em>ã“ã®æ–‡ãŒå¾Œã«ç¶šã„ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚</span>

Chinese: <span lang="zh-Hans"><em>è¿™æ˜¯æ–œä½“æ–‡å­—ï¼ˆå¸¦æ‹¬å·ï¼‰ã€‚</em>è¿™å¥å­ç»§ç»­ä¹Ÿæ²¡é—®é¢˜ã€‚</span>

Korean: <span lang="ko"><em>ì´ í…ìŠ¤íŠ¸(ê´„í˜¸ í¬í•¨)</em>ëŠ” ê¸°ìš¸ì„ê¼´ì…ë‹ˆë‹¤.</span>

### Strikethrough with Punctuation

Streamdown includes `remark-cjk-friendly-gfm-strikethrough` for proper strikethrough support:

```markdown
~~å‰Šé™¤ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆï¼ˆæ‹¬å¼§ä»˜ãï¼‰ã€‚~~ã“ã®æ–‡ã¯æ­£ã—ã„ã§ã™ã€‚
~~åˆ é™¤çš„æ–‡å­—ï¼ˆå¸¦æ‹¬å·ï¼‰ã€‚~~è¿™ä¸ªå¥å­æ˜¯æ­£ç¡®çš„ã€‚
~~ì´ í…ìŠ¤íŠ¸(ê´„í˜¸ í¬í•¨)~~ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
```

Japanese: <span lang="ja"><del>å‰Šé™¤ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆï¼ˆæ‹¬å¼§ä»˜ãï¼‰ã€‚</del>ã“ã®æ–‡ã¯æ­£ã—ã„ã§ã™ã€‚</span>

Chinese: <span lang="zh-Hans"><del>åˆ é™¤çš„æ–‡å­—ï¼ˆå¸¦æ‹¬å·ï¼‰ã€‚</del>è¿™ä¸ªå¥å­æ˜¯æ­£ç¡®çš„ã€‚</span>

Korean: <span lang="ko"><del>ì´ í…ìŠ¤íŠ¸(ê´„í˜¸ í¬í•¨)</del>ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤ã€‚</span>

### Mixed Content

CJK and English text work seamlessly together:

```markdown
**é‡è¦æç¤ºï¼ˆImportant Noticeï¼‰ï¼š**è¯·æ³¨æ„ã€‚
```

Result: <span lang="zh-Hans"><strong>é‡è¦æç¤ºï¼ˆImportant Noticeï¼‰ï¼š</strong>è¯·æ³¨æ„ã€‚</span>

## Supported Punctuation

The plugin handles all common ideographic punctuation marks:

* Parentheses: `ï¼ˆï¼‰`
* Brackets: `ã€ã€‘ã€Œã€ã€ˆã€‰`
* Periods: `ã€‚ï¼`
* Commas: `ï¼Œã€`
* Questions: `ï¼Ÿ`
* Exclamations: `ï¼`
* Colons: `ï¼š`

## Why This Matters for AI

Language models generate markdown naturally, often placing emphasis markers around phrases that include punctuation. Without CJK-friendly parsing, AI-generated content in Chinese, Japanese, or Korean would have broken formatting.

<dl>
  <dt>
    âŒ Without CJK support:
  </dt>

  <dd>
    * The model writes:{" "}
      <span lang="ja">`**ã“ã®ç”¨èªï¼ˆèª­ã¿æ–¹ãªã©ï¼‰**ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚`</span>- The
      user sees: <span lang="ja">
      \*\*ã“ã®ç”¨èªï¼ˆèª­ã¿æ–¹ãªã©ï¼‰\*\*ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
      </span> (not bold!)
  </dd>

  <dt>
    âœ… With CJK support:
  </dt>

  <dd>
    * The model writes:{" "}
      <span lang="ja">`**ã“ã®ç”¨èªï¼ˆèª­ã¿æ–¹ãªã©ï¼‰**ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚`</span>- The
      user sees: <span lang="ja">
      <strong>ã“ã®ç”¨èªï¼ˆèª­ã¿æ–¹ãªã©ï¼‰</strong>ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
      </span> (properly bolded!)
  </dd>
</dl>

## Configuration

CJK support is enabled by default with no configuration required. The plugins are included in the default remark plugin list:

```tsx
import { Streamdown } from "streamdown";

export default function Page() {
  return <Streamdown>{markdown}</Streamdown>;
}
```

### Disabling CJK Support

If you need to disable CJK support, you can override the default remark plugins:

```tsx
import { Streamdown } from "streamdown";
import remarkGfm from "remark-gfm";
import remarkMath from "remark-math";

export default function Page() {
  return (
    <Streamdown remarkPlugins={[remarkGfm, remarkMath]}>{markdown}</Streamdown>
  );
}
```

Note: This removes all default remark plugins, so you'll need to add back any others you need.

# Code Blocks

Streamdown provides beautiful, interactive code blocks with syntax highlighting powered by [Shiki](https://shiki.style/). Every code block includes a copy button and supports a wide range of programming languages.

## Basic Usage

Create code blocks using triple backticks with an optional language identifier:

````markdown
```javascript
function greet(name) {
  return `Hello, ${name}!`;
}
```
````

Streamdown will automatically apply syntax highlighting based on the specified language.

## Supported Languages

Shiki supports 200+ programming languages out of the box, including:

* **Web**: JavaScript, TypeScript, HTML, CSS, JSX, TSX, Vue, Svelte
* **Backend**: Python, Java, Go, Rust, C, C++, C#, PHP, Ruby
* **Data**: SQL, JSON, YAML, TOML, XML, GraphQL
* **Shell**: Bash, PowerShell, Zsh
* **Markup**: Markdown, MDX, LaTeX
* **And many more**: Kotlin, Swift, Scala, Haskell, Elixir, Clojure...

### Language Examples

#### TypeScript

````markdown
```typescript
interface User {
  id: number;
  name: string;
  email: string;
}

async function fetchUser(id: number): Promise<User> {
  const response = await fetch(`/api/users/${id}`);
  return response.json();
}
```
````

#### Python

````markdown
```python
def fibonacci(n: int) -> list[int]:
    """Generate Fibonacci sequence up to n terms."""
    fib = [0, 1]
    for i in range(2, n):
        fib.append(fib[i-1] + fib[i-2])
    return fib

print(fibonacci(10))
```
````

#### Rust

````markdown
```rust
fn main() {
    let numbers = vec![1, 2, 3, 4, 5];
    let sum: i32 = numbers.iter().sum();
    println!("Sum: {}", sum);
}
```
````

## Theme Configuration

Streamdown uses dual themes for light and dark modes. You can customize the themes using the `shikiTheme` prop:

```tsx title="app/page.tsx"
import { Streamdown } from 'streamdown';
import type { BundledTheme } from 'shiki';

const themes = ['github-light', 'github-dark'] as [BundledTheme, BundledTheme];

export default function Page() {
  return (
    <Streamdown shikiTheme={themes}>
      {markdown}
    </Streamdown>
  );
}
```

Refer to the [Shiki Themes](https://shiki.style/themes) page for a full list of available themes.

## Interactive Features

### Copy Button

Every code block includes a copy button that appears on hover. Users can click to copy the entire code block content to their clipboard.

The copy button:

* Appears on hover (desktop) or is always visible (mobile)
* Provides visual feedback on successful copy
* Is automatically disabled during streaming (when `isAnimating={true}`)

### Disable Copy Button

You can disable the copy button using the `controls` prop:

```tsx title="app/page.tsx"
<Streamdown controls={{ code: false }}>
  {markdown}
</Streamdown>
```

Or disable all controls:

```tsx title="app/page.tsx"
<Streamdown controls={false}>
  {markdown}
</Streamdown>
```

## Inline Code

Inline code uses backticks and receives subtle styling:

```markdown
Use the `useState` hook to manage state in React.
```

Inline code is styled with:

* Monospace font family
* Subtle background color
* Rounded corners
* Appropriate padding

## Code Block Styling

Code blocks include:

* **Line Numbers** - Optional line numbers for reference
* **Rounded Corners** - Modern, polished appearance
* **Proper Padding** - Comfortable spacing
* **Scrolling** - Horizontal scroll for long lines
* **Responsive Design** - Adapts to container width

## Streaming Considerations

Code blocks work seamlessly with streaming content:

### Incomplete Code Blocks

When a code block is streaming in, Streamdown handles the incomplete state gracefully:

````markdown
```javascript
function example() {
  // Streaming in progress...
````

The unterminated block parser ensures the code block renders properly even without the closing backticks.

### Disabling Interactions During Streaming

Use the `isAnimating` prop to disable copy buttons while streaming:

```tsx title="app/page.tsx"
<Streamdown isAnimating={isStreaming}>
  {markdown}
</Streamdown>
```

This prevents users from copying incomplete code.


# GitHub Flavored Markdown

Streamdown includes full support for GitHub Flavored Markdown (GFM) through [remark-gfm](https://github.com/remarkjs/remark-gfm). This extends standard Markdown with powerful features commonly used on GitHub and other modern Markdown platforms.

## Tables

Create formatted tables with alignment options:

```markdown
| Feature | Supported | Notes |
|---------|-----------|-------|
| Tables | âœ… | Full support |
| Task Lists | âœ… | Interactive |
| Strikethrough | âœ… | ~~Like this~~ |
```

Renders as:

| Feature       | Supported | Notes         |
| ------------- | --------- | ------------- |
| Tables        | âœ…         | Full support  |
| Task Lists    | âœ…         | Interactive   |
| Strikethrough | âœ…         | ~~Like this~~ |

### Column Alignment

Control text alignment using colons in the separator row:

```markdown
| Left | Center | Right |
|:-----|:------:|------:|
| A | B | C |
| 1 | 2 | 3 |
```

Result:

| Left | Center | Right |
| :--- | :----: | ----: |
| A    |    B   |     C |
| 1    |    2   |     3 |

**Alignment Syntax:**

* `:---` - Left-aligned (default)
* `:---:` - Center-aligned
* `---:` - Right-aligned

### Table Features

Streamdown enhances tables with:

* **Responsive scrolling** - Tables scroll horizontally on narrow screens
* **Download button** - Export tables as CSV or JSON
* **Hover states** - Row highlighting for better readability
* **Proper spacing** - Optimized cell padding

### Complex Tables

Tables support inline formatting:

```markdown
| Name | Description | Status |
|------|-------------|--------|
| **Streamdown** | A `react-markdown` replacement | âœ… Active |
| *Feature X* | Under development | ğŸš§ WIP |
| ~~Old Package~~ | Deprecated | âŒ Removed |
```

### Disabling Table Controls

You can disable the table download button:

```tsx
<Streamdown controls={{ table: false }}>
  {markdown}
</Streamdown>
```

## Task Lists

Create interactive todo lists:

```markdown
- [x] Setup project structure
- [x] Install dependencies
- [ ] Write documentation
- [ ] Deploy to production
```

Renders as:

* [x] Setup project structure
* [x] Install dependencies
* [ ] Write documentation
* [ ] Deploy to production

### Task List Syntax

* `- [ ]` - Unchecked task (whitespace in brackets)
* `- [x]` - Checked task (lowercase x)
* `- [X]` - Also checked (uppercase X)

### Nested Task Lists

Task lists can be nested:

```markdown
- [ ] Phase 1: Setup
  - [x] Initialize repository
  - [x] Configure build tools
  - [ ] Setup CI/CD
- [ ] Phase 2: Development
  - [ ] Implement features
  - [ ] Write tests
```

### Task Lists in Different Contexts

Task lists work in various contexts:

```markdown
## Shopping List
- [ ] Milk
- [ ] Eggs
- [x] Bread

> **Note**: Here's a quote with tasks:
> - [x] Complete quote formatting
> - [ ] Add more examples
```

## Strikethrough

Mark text as deleted or outdated:

```markdown
~~This approach is deprecated~~

Use this **new method** instead.
```

Result: ~~This approach is deprecated~~

### Multiple Words

Strikethrough works across multiple words:

```markdown
~~This entire sentence is struck through.~~
```

### In Context

```markdown
**Before:** ~~500ms response time~~
**After:** 50ms response time âš¡
```

Result:
**Before:** ~~500ms response time~~
**After:** 50ms response time âš¡

## Autolinks

URLs and email addresses are automatically converted to links:

```markdown
Visit https://streamdown.ai for more info.

Contact us at hello@streamdown.ai
```

No need for explicit link syntax:

```markdown
Check out github.com/vercel/streamdown
```

### URL Protocols

Autolinks work with common protocols:

* `http://` and `https://`
* `ftp://`
* `mailto:`

```markdown
https://example.com
ftp://files.example.com
mailto:hello@example.com
```

## Line Breaks

GFM respects line breaks without requiring two spaces:

```markdown
This is line one
This is line two
This is line three
```

Standard Markdown would combine these into one paragraph, but GFM preserves the breaks.

To force a line break in standard Markdown:

```markdown
Line one
Line two (note: two spaces after "one")
```


# Interactivity

Streamdown enhances the user experience by adding interactive buttons to images, tables, and code blocks. These controls allow users to easily copy content to their clipboard or download it for later use, making your markdown content more practical and user-friendly.

## Overview

Streamdown automatically adds interactive controls to:

* **Images** - Download button on hover
* **Tables** - Copy buttons for CSV/TSV formats and download buttons for CSV/Markdown formats
* **Code Blocks** - Copy and download buttons
* **Mermaid Diagrams** - Copy, download, and fullscreen buttons

All interactive controls:

* Appear on hover (desktop) or are always visible (mobile)
* Provide visual feedback on successful actions
* Are automatically disabled during streaming when `isAnimating={true}`
* Can be customized or disabled via the `controls` prop

## Image Buttons

### Download Images

Every image rendered by Streamdown includes a download button that appears on hover. A download button will be shown for images in the bottom-right corner on hover. Streamdown will automatically detect the image format and save it with the correct extension. The image's alt text will be used as the default filename.

## Table Buttons

### Copy Tables

Tables include a copy button that opens a dropdown menu allowing users to copy the table data in multiple formats. The copy button will be shown for tables in the top-right corner on hover. Users can choose to copy the table as CSV or TSV (tab-separated values). The table is also copied as HTML for rich pasting into applications that support it.

### Download Tables

Tables can be downloaded in two formats: CSV and Markdown. The download button will be shown for tables in the top-right corner on hover. The download button opens a dropdown menu with options to download as CSV or Markdown, making it easy to export table data for use in spreadsheets or documentation.

## Code Block Buttons

### Copy Code

Every code block includes a copy button that appears on hover. The copy button will be shown for code blocks in the top-right corner on hover. The copy button will copy the raw code without syntax highlighting. It will also show a checkmark for 2 seconds after successful copy. It will be disabled during streaming to prevent copying incomplete code.

### Download Code

Code blocks also include a download button that appears on hover. The download button will be shown for code blocks in the top-right corner on hover. The download button will download the code with the appropriate file extension based on language. It will also use "file.\[extension]" as the filename. It will preserve formatting and indentation.

## Mermaid Diagram Buttons

### Copy Diagrams

Mermaid diagrams include a copy button that allows users to copy the diagram source code. The copy button will be shown for Mermaid diagrams in the top-right corner on hover. The copy button will copy the raw Mermaid syntax for easy sharing and editing.

### Download Diagrams

Mermaid diagrams can be downloaded as SVG files. The download button will be shown for Mermaid diagrams in the top-right corner on hover. The download button will download the rendered diagram as an SVG file. It will use "diagram.svg" as the default filename.

### Fullscreen View

Mermaid diagrams include a fullscreen button for better viewing of complex diagrams. The fullscreen button will be shown for Mermaid diagrams in the top-right corner on hover. The fullscreen button will open the diagram in a modal overlay for detailed inspection. Users can press Escape or click outside to close the fullscreen view.


# Mathematics

Streamdown provides built-in support for rendering mathematical expressions using LaTeX syntax, powered by [KaTeX](https://katex.org/). Write complex equations and formulas that render beautifully alongside your content.

## Syntax

Streamdown uses double dollar signs (`$$`) to delimit mathematical expressions. Unlike traditional LaTeX, single dollar signs (`$`) are **not** used to avoid conflicts with currency symbols in regular text.

### Inline Math

Wrap inline mathematical expressions with `$$`:

```markdown
The quadratic formula is $$x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$$ for solving equations.
```

Renders as: The quadratic formula is $x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$ for solving equations.

### Block Math

For display-style equations, place `$$` delimiters on separate lines:

```markdown
$$
E = mc^2
$$
```

This renders the equation centered and larger:

$$
E = mc^2
$$

## Common Mathematical Expressions

### Fractions

```markdown
$$\frac{numerator}{denominator}$$
```

Example: $\frac{1}{2}$, $\frac{a + b}{c - d}$

### Square Roots

```markdown
$$\sqrt{x}$$ or $$\sqrt[n]{x}$$
```

Example: $\sqrt{16} = 4$, $\sqrt[3]{27} = 3$

### Exponents and Subscripts

```markdown
$$x^2$$ or $$x_i$$ or $$x_i^2$$
```

Example: $a^2 + b^2 = c^2$, $x_1, x_2, \ldots, x_n$

### Greek Letters

```markdown
$$\alpha, \beta, \gamma, \delta, \theta, \pi, \sigma, \omega$$
$$\Gamma, \Delta, \Theta, \Pi, \Sigma, \Omega$$
```

Common letters: $\alpha, \beta, \gamma, \delta, \epsilon, \pi, \sigma, \phi, \omega$

### Summations

```markdown
$$\sum_{i=1}^{n} i = \frac{n(n+1)}{2}$$
```

The sum of first $n$ natural numbers: $\sum_{i=1}^{n} i = \frac{n(n+1)}{2}$

### Integrals

```markdown
$$\int_{a}^{b} f(x) \, dx$$
```

Definite integral: $\int_{0}^{1} x^2 \, dx = \frac{1}{3}$

### Limits

```markdown
$$\lim_{x \to \infty} \frac{1}{x} = 0$$
```

Example: $\lim_{x \to 0} \frac{\sin x}{x} = 1$

### Matrices

```markdown
$$
\begin{bmatrix}
a & b \\
c & d
\end{bmatrix}
$$
```

A 2Ã—2 matrix:

$$
\begin{bmatrix}
1 & 2 \\
3 & 4
\end{bmatrix}
$$

## Advanced Examples

### The Quadratic Formula

```markdown
$$
x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
$$
```

$$
x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
$$

### Euler's Identity

```markdown
$$
e^{i\pi} + 1 = 0
$$
```

$$
e^{i\pi} + 1 = 0
$$

### Normal Distribution

```markdown
$$
f(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{-\frac{1}{2}\left(\frac{x-\mu}{\sigma}\right)^2}
$$
```

The probability density function:

$$
f(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{-\frac{1}{2}\left(\frac{x-\mu}{\sigma}\right)^2}
$$

### Taylor Series

```markdown
$$
e^x = \sum_{n=0}^{\infty} \frac{x^n}{n!} = 1 + x + \frac{x^2}{2!} + \frac{x^3}{3!} + \cdots
$$
```

$$
e^x = \sum_{n=0}^{\infty} \frac{x^n}{n!} = 1 + x + \frac{x^2}{2!} + \frac{x^3}{3!} + \cdots
$$

### Integration by Parts

```markdown
$$
\int u \, dv = uv - \int v \, du
$$
```

$$
\int u \, dv = uv - \int v \, du
$$

## Special Operators and Symbols

### Comparison Operators

```markdown
$$\leq$$ $$\geq$$ $$\neq$$ $$\approx$$ $$\equiv$$
```

$x \leq y$, $a \geq b$, $x \neq 0$, $\pi \approx 3.14$, $a \equiv b \pmod{n}$

### Set Notation

```markdown
$$\in$$ $$\notin$$ $$\subset$$ $$\subseteq$$ $$\cup$$ $$\cap$$ $$\emptyset$$
```

$x \in A$, $y \notin B$, $A \subset B$, $A \cup B$, $A \cap B$, $\emptyset$

### Logic Symbols

```markdown
$$\land$$ $$\lor$$ $$\neg$$ $$\implies$$ $$\iff$$ $$\forall$$ $$\exists$$
```

$p \land q$, $p \lor q$, $\neg p$, $p \implies q$, $p \iff q$, $\forall x$, $\exists y$

### Calculus Notation

```markdown
$$\frac{dy}{dx}$$ $$\frac{\partial f}{\partial x}$$ $$\nabla$$ $$\infty$$
```

Derivative: $\frac{dy}{dx}$, Partial: $\frac{\partial f}{\partial x}$, Gradient: $\nabla f$, Infinity: $\infty$

## Configuration

### Custom Error Color

Customize how errors are displayed:

```tsx
import { Streamdown } from 'streamdown';
import rehypeKatex from 'rehype-katex';

export default function Page() {
  return (
    <Streamdown
      rehypePlugins={[
        [rehypeKatex, { errorColor: '#dc2626' }]
      ]}
    >
      {markdown}
    </Streamdown>
  );
}
```

### Disable Math Support

If you don't need math support, you can exclude the plugins:

```tsx
import { Streamdown } from 'streamdown';

export default function Page() {
  return (
    <Streamdown
      remarkPlugins={[]} // Removes remark-math
      rehypePlugins={[]} // Removes rehype-katex
    >
      {markdown}
    </Streamdown>
  );
}
```

Note: This will remove all default plugins, so you'll need to add back any others you need.

## Streaming Considerations

### Incomplete Equations

Streamdown's unterminated block parser handles incomplete equations gracefully:

```markdown
$$
E = mc^
```

During streaming, the parser detects the incomplete block-level equation and adds the closing `$$` delimiter, ensuring proper rendering even before the equation is complete.

### Inline vs Block Detection

The parser distinguishes between inline and block math:

* **Inline**: $E = mc^2$ (same line)
* **Block**: Separate lines with newlines

```markdown
This is inline $$E = mc^2$$ math.

$$
E = mc^2
$$

This is block math.
```

## Accessibility

Mathematical expressions rendered by KaTeX include:

* **MathML** - Machine-readable math representation
* **Title Attributes** - LaTeX source in tooltips
* **Semantic HTML** - Proper structure for screen readers
* **Scalable Typography** - Math scales with text size settings

## Performance

KaTeX is chosen for its performance characteristics:

* **Fast Rendering** - 2-3x faster than MathJax
* **No JavaScript Runtime** - Pure CSS styling (after initial render)
* **Small Bundle** - Minimal impact on page load
* **Cached Parsing** - Streamdown memoizes rendered equations

## Common Issues

### Escaping Backslashes

In JavaScript/TypeScript strings, backslashes need to be escaped:

```tsx
// âŒ Wrong
const markdown = "$\frac{1}{2}$";

// âœ… Correct
const markdown = "$$\\frac{1}{2}$$";

// âœ… Or use template literals
const markdown = `$$\frac{1}{2}$$`;
```

### Currency vs Math

Streamdown uses `$$` for math to avoid conflicts with currency:

```markdown
This item costs $5 and that one costs $10. (These are currency symbols)

This equation $$x = 5$$ is mathematical notation. (This is math)
```

### Spacing in Equations

Use `\,` for thin space, `\:` for medium space, `\;` for thick space:

```markdown
$$\int f(x) \, dx$$
```

Better spacing: $\int f(x) \, dx$

## Resources

* [KaTeX Documentation](https://katex.org/docs/supported.html) - Complete list of supported functions
* [KaTeX Support Table](https://katex.org/docs/support_table.html) - Feature compatibility
* [LaTeX Math Symbols](https://www.overleaf.com/learn/latex/List_of_Greek_letters_and_math_symbols) - Symbol reference

## Best Practices

### Keep Equations Readable

Break complex equations into steps:

```markdown
Start with the equation:

$$
f(x) = ax^2 + bx + c
$$

Complete the square:

$$
f(x) = a\left(x + \frac{b}{2a}\right)^2 + c - \frac{b^2}{4a}
$$
```

### Add Context

Explain your equations:

```markdown
The Pythagorean theorem states that for a right triangle:

$$
a^2 + b^2 = c^2
$$

where $$a$$ and $$b$$ are the legs and $$c$$ is the hypotenuse.
```

### Use Block Math for Complex Expressions

Reserve inline math for simple expressions:

```markdown
âœ… Good: The slope is $$m = \frac{y_2 - y_1}{x_2 - x_1}$$

âŒ Avoid: $$\int_{-\infty}^{\infty} e^{-x^2} \, dx = \sqrt{\pi}$$ in the middle of text

âœ… Better:

$$
\int_{-\infty}^{\infty} e^{-x^2} \, dx = \sqrt{\pi}
$$
```

## Related Features

* [Typography](/docs/typography) - Text styling that complements mathematical content
* [Unterminated Block Parsing](/docs/termination) - How streaming works with equations
* [GitHub Flavored Markdown](/docs/gfm) - Extended Markdown features


# Memoization

Streamdown is built with performance in mind, utilizing React's memoization capabilities to ensure efficient rendering even with large amounts of streaming content. The library intelligently caches computations and prevents unnecessary re-renders, making it ideal for real-time AI streaming applications.

## How Memoization Works

Streamdown implements memoization at multiple levels to maximize performance:

### Component-Level Memoization

The main `Streamdown` component is wrapped with `React.memo`, which prevents re-renders when props haven't changed:

```tsx
import { Streamdown } from 'streamdown';

export default function Page() {
  const markdown = "# Hello World\n\nThis is **streaming** markdown!";

  return <Streamdown>{markdown}</Streamdown>;
}
```

The component only re-renders when:

* The `children` prop (markdown content) changes
* The `shikiTheme` prop changes
* The `isAnimating` prop changes

All other prop changes are ignored, ensuring optimal performance.

### Block-Level Memoization

Streamdown parses markdown content into individual blocks, with each block memoized separately. This means:

* Only blocks with changed content are re-rendered
* Unchanged blocks remain memoized, even if new blocks are added
* Parsing is cached per block for efficiency

Expensive computations are also cached using `useMemo`.

## Performance Benefits

### Streaming Efficiency

When content is streaming in, Streamdown's memoization strategy ensures:

1. **Incremental Rendering** - Only new or changed blocks are processed
2. **Stable Output** - Completed blocks remain stable and don't re-render
3. **Minimal Overhead** - Parsing and rendering work is minimized

Example with streaming content:

```tsx
'use client';

import { useChat } from '@ai-sdk/react';
import { Streamdown } from 'streamdown';

export default function Chat() {
  const { messages, sendMessage, status } = useChat();

  return (
    <>
      {messages.map(message => (
        <div key={message.id}>
          {message.parts.filter(part => part.type === 'text').map((part, index) => (
            <Streamdown
              isAnimating={status === 'streaming'}
              key={index}
            >
              {part.text}
            </Streamdown>
          ))}
        </div>
      ))}
    </>
  );
}
```

In this example:

* As new tokens arrive, only the affected blocks are re-rendered
* Previous blocks remain memoized and stable
* The rendering performance stays consistent regardless of content length

### Syntax Highlighting Cache

The syntax highlighter maintains an internal cache of loaded languages and themes. This means:

* Languages are loaded once and cached for reuse
* Theme changes don't require reloading languages
* Multiple code blocks in the same language share the highlighter instance


# Mermaid Diagrams

Streamdown includes built-in support for [Mermaid](https://mermaid.js.org/) diagrams, allowing you to create flowcharts, sequence diagrams, state diagrams, and more using simple text-based syntax. Each diagram includes interactive controls for fullscreen viewing, downloading, and copying.

## Basic Usage

Create Mermaid diagrams using code blocks with the `mermaid` language identifier:

````markdown
```mermaid
graph TD
    A[Start] --> B{Decision}
    B -->|Yes| C[Success]
    B -->|No| D[Try Again]
    D --> B
```
````

Streamdown will render the diagram as an interactive SVG with controls.

## Diagram Types

### Flowcharts

Create flowcharts to visualize processes and workflows:

````markdown
```mermaid
graph TD
    A[Christmas] -->|Get money| B(Go shopping)
    B --> C{Let me think}
    C -->|One| D[Laptop]
    C -->|Two| E[iPhone]
    C -->|Three| F[Car]
```
````

**Node Shapes:**

* `[text]` - Rectangle
* `(text)` - Rounded rectangle
* `{text}` - Rhombus (decision)
* `((text))` - Circle
* `[[text]]` - Subroutine shape

**Direction:**

* `graph TD` - Top to bottom
* `graph LR` - Left to right
* `graph BT` - Bottom to top
* `graph RL` - Right to left

### Sequence Diagrams

Visualize interactions between different actors or systems:

````markdown
```mermaid
sequenceDiagram
    participant User
    participant Browser
    participant Server
    participant Database

    User->>Browser: Enter URL
    Browser->>Server: HTTP Request
    Server->>Database: Query data
    Database-->>Server: Return results
    Server-->>Browser: HTTP Response
    Browser-->>User: Display page
```
````

**Arrow Types:**

* `->` - Solid line
* `-->` - Dotted line
* `->>` - Solid arrow
* `-->>` - Dotted arrow

### State Diagrams

Model state machines and state transitions:

````markdown
```mermaid
stateDiagram-v2
    [*] --> Idle
    Idle --> Loading: start
    Loading --> Success: data received
    Loading --> Error: failed
    Success --> Idle: reset
    Error --> Loading: retry
    Success --> [*]
```
````

### Class Diagrams

Document object-oriented designs:

````markdown
```mermaid
classDiagram
    class User {
        +String name
        +String email
        +login()
        +logout()
    }
    class Post {
        +String title
        +String content
        +Date createdAt
        +publish()
    }
    User "1" --> "*" Post: creates
```
````

### Pie Charts

Display proportional data:

````markdown
```mermaid
pie title Project Time Distribution
    "Development" : 45
    "Testing" : 20
    "Documentation" : 15
    "Meetings" : 20
```
````

### Gantt Charts

Plan and track project timelines:

````markdown
```mermaid
gantt
    title Project Schedule
    dateFormat YYYY-MM-DD
    section Design
    Wireframes       :2024-01-01, 7d
    Mockups         :2024-01-08, 7d
    section Development
    Frontend        :2024-01-15, 14d
    Backend         :2024-01-15, 14d
    section Testing
    QA Testing      :2024-01-29, 7d
```
````

### Entity Relationship Diagrams

Model database relationships:

````markdown
```mermaid
erDiagram
    USER ||--o{ POST : creates
    USER {
        int id PK
        string email
        string name
    }
    POST {
        int id PK
        int userId FK
        string title
        text content
    }
    POST ||--o{ COMMENT : has
    COMMENT {
        int id PK
        int postId FK
        string content
    }
```
````

### Git Graphs

Visualize Git workflows:

````markdown
```mermaid
gitGraph
    commit
    commit
    branch develop
    checkout develop
    commit
    commit
    checkout main
    merge develop
    commit
```
````

## Configuration

### Theme Customization

Customize the Mermaid theme using the `mermaid.config` prop:

```tsx
import { Streamdown } from 'streamdown';
import type { MermaidConfig } from 'streamdown';

export default function Page() {
  return (
    <Streamdown
      mermaid={{
        config: {
          theme: 'dark',
          themeVariables: {
            primaryColor: '#ff6b6b',
            primaryTextColor: '#fff',
            primaryBorderColor: '#ff6b6b',
            lineColor: '#f5f5f5',
            secondaryColor: '#4ecdc4',
            tertiaryColor: '#45b7d1'
          }
        }
      }}
    >
      {markdown}
    </Streamdown>
  );
}
```

### Available Themes

Mermaid includes several built-in themes:

* `default` - Classic Mermaid theme
* `dark` - Dark mode optimized
* `forest` - Green tones
* `neutral` - Minimal styling
* `base` - Clean, modern style

Example:

```tsx
<Streamdown mermaid={{ config: { theme: 'forest' } }}>
  {markdown}
</Streamdown>
```

### Advanced Configuration

Customize specific diagram types:

```tsx
<Streamdown
  mermaid={{
    config: {
      theme: 'base',
      themeVariables: {
        fontSize: '16px',
        fontFamily: 'Inter, sans-serif',
      },
      flowchart: {
        nodeSpacing: 50,
        rankSpacing: 50,
        curve: 'basis',
      },
      sequence: {
        actorMargin: 50,
        boxMargin: 10,
        boxTextMargin: 5,
      },
    }
  }}
>
  {markdown}
</Streamdown>
```

## Error Handling

### Custom Error Component

When Mermaid diagrams fail to render due to invalid syntax, you can provide a custom error component instead of displaying the default error message. This is especially useful for production environments where you want to control the user experience.

```tsx
import { Streamdown } from 'streamdown';
import type { MermaidErrorComponentProps } from 'streamdown';

const CustomMermaidError = ({ error, chart, retry }: MermaidErrorComponentProps) => (
  <div className="rounded-lg border border-amber-200 bg-amber-50 p-4">
    <div className="flex items-center gap-2">
      <span className="text-xl">âš ï¸</span>
      <p className="font-semibold text-amber-900">Couldn't render diagram</p>
    </div>
    <p className="mt-2 text-amber-700 text-sm">
      There was an issue with the diagram syntax.
    </p>
    <button
      onClick={retry}
      className="mt-3 rounded bg-amber-600 px-4 py-2 text-white text-sm hover:bg-amber-700"
    >
      Try Again
    </button>
  </div>
);

export default function Page() {
  return (
    <Streamdown
      mermaid={{
        errorComponent: CustomMermaidError
      }}
    >
      {markdown}
    </Streamdown>
  );
}
```

The error component receives three props:

* **error** (`string`) - The error message from Mermaid
* **chart** (`string`) - The original Mermaid diagram code
* **retry** (`() => void`) - Function to retry rendering the diagram

### Error Component Benefits

* **Production-ready** - Hide technical error details from end users
* **Custom branding** - Style errors to match your application
* **Better UX** - Provide helpful actions like retry buttons or support links
* **Debugging control** - Log errors to your monitoring service

### Example: Logging Errors

```tsx
const ErrorWithLogging = ({ error, chart, retry }: MermaidErrorComponentProps) => {
  useEffect(() => {
    // Log to your error tracking service
    console.error('Mermaid rendering failed:', error);
    // Could also send to Sentry, LogRocket, etc.
  }, [error]);

  return (
    <div className="text-center p-4">
      <p className="text-muted-foreground">Unable to display diagram</p>
      <button onClick={retry} className="mt-2 text-primary text-sm underline">
        Retry
      </button>
    </div>
  );
};
```

## Interactive Controls

Each Mermaid diagram includes interactive controls:

### Fullscreen Mode

Click the fullscreen button to view the diagram in an overlay with a dark background. This is especially useful for complex diagrams.

### Download

Download the diagram as an SVG file for use in presentations or documentation.

### Copy

Copy the diagram to your clipboard for pasting into other applications.

### Customizing Controls

You can customize which controls are shown:

```tsx
<Streamdown
  controls={{
    mermaid: {
      fullscreen: true,
      download: true,
      copy: true,
    }
  }}
>
  {markdown}
</Streamdown>
```

Or disable specific controls:

```tsx
<Streamdown
  controls={{
    mermaid: {
      fullscreen: true,
      download: false,  // Hide download button
      copy: false,      // Hide copy button
    }
  }}
>
  {markdown}
</Streamdown>
```

Or disable all Mermaid controls:

```tsx
<Streamdown controls={{ mermaid: false }}>
  {markdown}
</Streamdown>
```

## Streaming Considerations

### Initial Render

When Mermaid diagrams are first streamed in, they appear as code blocks until the diagram syntax is complete. Streamdown's parser ensures the code block is properly formatted during streaming.

### Disable Interactions During Streaming

Use the `isAnimating` prop to disable interactive controls while content is streaming:

```tsx
<Streamdown isAnimating={isStreaming}>
  {markdown}
</Streamdown>
```

This prevents users from interacting with incomplete diagrams.

## Best Practices

### Keep Diagrams Focused

Break complex diagrams into smaller, focused visualizations:

````markdown
âœ… Good: Multiple small diagrams

## User Authentication Flow
```mermaid
graph LR
    A[Login] --> B{Valid?}
    B -->|Yes| C[Dashboard]
    B -->|No| D[Error]
```

## Data Fetching Flow
```mermaid
graph LR
    A[Request] --> B[API]
    B --> C[Database]
    C --> B
    B --> D[Response]
```

âŒ Avoid: One massive diagram with everything
````

### Add Context

Provide descriptions for your diagrams:

````markdown
Here's the authentication flow for our application:

```mermaid
sequenceDiagram
    User->>App: Enter credentials
    App->>Server: Authenticate
    Server-->>App: Token
    App-->>User: Success
```

The server validates credentials and returns a JWT token.
````

### Use Descriptive Labels

Make your diagrams self-documenting:

````markdown
âœ… Good: Clear labels
```mermaid
graph TD
    A[User clicks 'Submit'] --> B{Form valid?}
    B -->|Yes| C[Send to server]
    B -->|No| D[Show validation errors]
```

âŒ Avoid: Cryptic labels
```mermaid
graph TD
    A[Step 1] --> B{Check}
    B -->|OK| C[Next]
    B -->|Bad| D[Err]
```
````

### Choose the Right Diagram Type

Select the diagram type that best represents your information:

* **Flowchart** - Processes, algorithms, workflows
* **Sequence** - API interactions, communication flows
* **State** - Lifecycle, state machines
* **Class** - Object relationships, architecture
* **ER** - Database schemas
* **Gantt** - Project timelines
* **Pie/Bar** - Statistical data

## Syntax Reference

### Flowchart Links

```
A --> B         // Arrow
A --- B         // Line
A -.-> B        // Dotted arrow
A ==> B         // Thick arrow
A -->|Label| B  // Labeled arrow
```

### Sequence Diagram Actors

```
participant A as Alice
actor B as Bob
```

### Styling Nodes

<Mermaid
  chart="graph TD
    A[Node]
    style A fill:#f9f,stroke:#333,stroke-width:4px"
/>

### Subgraphs

<Mermaid
  chart="graph TD
    subgraph Group A
        A1 --> A2
    end
    subgraph Group B
        B1 --> B2
    end
    A2 --> B1"
/>

## Common Issues

### Diagram Not Rendering

1. Verify the syntax is correct (check [Mermaid Live Editor](https://mermaid.live/))
2. Ensure the code block uses ` ```mermaid `
3. Check browser console for JavaScript errors
4. Verify Mermaid is not being blocked by CSP

### Performance with Large Diagrams

Large diagrams may take time to render. Consider:

* Breaking into smaller diagrams
* Simplifying node relationships
* Using subgraphs for organization
* Lazy loading diagram-heavy pages

### Theme Not Applying

1. Verify `mermaidConfig` is properly passed
2. Check that theme name is spelled correctly
3. Ensure custom theme variables are valid

## Resources

* [Mermaid Documentation](https://mermaid.js.org/intro/) - Official docs
* [Mermaid Live Editor](https://mermaid.live/) - Test diagrams online
* [Syntax Reference](https://mermaid.js.org/intro/syntax-reference.html) - Complete syntax guide
* [Mermaid Examples](https://mermaid.js.org/ecosystem/integrations.html) - Gallery of examples

## Related Features

* [Code Blocks](/docs/code-blocks) - Syntax highlighting for other code
* [GitHub Flavored Markdown](/docs/gfm) - Extended Markdown features
* [Typography](/docs/typography) - Text styling around diagrams
* [Unterminated Block Parsing](/docs/termination) - How streaming works with Mermaid


# Security

Streamdown is built with security as a top priority. When rendering user-generated or AI-generated Markdown content, it's crucial to protect against malicious content, especially when dealing with content that might have been subject to prompt injection attacks.

## Why Security Matters

Markdown can contain:

* **Links to malicious sites** - Phishing or malware distribution
* **External images** - Privacy tracking or CSRF attacks
* **HTML content** - XSS vulnerabilities
* **JavaScript execution** - Code injection
* **Prompt injection** - AI models manipulated to include harmful content

Streamdown uses [rehype-harden](https://github.com/vercel-labs/markdown-sanitizers) to sanitize and validate content before rendering.

## Default Security

By default, Streamdown is configured with **permissive security** to allow maximum functionality:

```tsx
// Default configuration
{
  allowedImagePrefixes: ["*"],  // All images allowed
  allowedLinkPrefixes: ["*"],   // All links allowed
  defaultOrigin: undefined,     // No origin restriction
  allowDataImages: true,        // Base64 images allowed
}
```

This works well for trusted content but should be tightened for untrusted sources.

## Restricting Links

Limit which domains users can link to:

```tsx
import { Streamdown, defaultRehypePlugins } from 'streamdown';
import { harden } from 'rehype-harden';

export default function Page() {
  return (
    <Streamdown
      rehypePlugins={[
        defaultRehypePlugins.raw,
        defaultRehypePlugins.katex,
        [
          harden,
          {
            defaultOrigin: 'https://streamdown.ai',
            allowedLinkPrefixes: [
              'https://streamdown.ai',
              'https://github.com',
              'https://vercel.com',
            ],
          },
        ],
      ]}
    >
      {markdown}
    </Streamdown>
  );
}
```

Any links not matching the allowed prefixes will be rewritten to point to the `defaultOrigin`.

### Example

With the above configuration:

```markdown
[Safe link](https://github.com/vercel/streamdown)
[Unsafe link](https://malicious-site.com)
```

Results in:

* Safe link: Works normally
* Unsafe link: Renders as \[blocked]

## Restricting Images

Similarly, restrict which domains can serve images:

```tsx
<Streamdown
  rehypePlugins={[
    defaultRehypePlugins.raw,
    defaultRehypePlugins.katex,
    [
      harden,
      {
        allowedImagePrefixes: [
          'https://your-cdn.com',
          'https://trusted-images.com',
        ],
        allowDataImages: false,  // Disable base64 images
      },
    ],
  ]}
>
  {markdown}
</Streamdown>
```

### Data Images

Base64-encoded images (`data:image/...`) can be disabled:

```tsx
allowDataImages: false
```

This prevents embedding arbitrary image data in Markdown, which could be used for:

* Tracking pixels
* Large embedded files
* Malicious payloads

## Protecting Against Prompt Injection

When using AI-generated content, models can be manipulated to include malicious links or content. Here's a production-ready configuration:

```tsx
import { Streamdown, defaultRehypePlugins } from 'streamdown';
import { harden } from 'rehype-harden';

export default function ChatMessage({ content, isAIGenerated }) {
  const securityConfig = isAIGenerated ? {
    defaultOrigin: 'https://your-app.com',
    allowedLinkPrefixes: [
      'https://your-app.com',
      'https://docs.your-app.com',
      'https://github.com',
    ],
    allowedImagePrefixes: [
      'https://your-cdn.com',
    ],
    allowDataImages: false,
  } : {
    // More permissive for user content
    allowedLinkPrefixes: ['*'],
    allowedImagePrefixes: ['*'],
  };

  return (
    <Streamdown
      rehypePlugins={[
        defaultRehypePlugins.raw,
        defaultRehypePlugins.katex,
        [harden, securityConfig],
      ]}
    >
      {content}
    </Streamdown>
  );
}
```

## HTML Content

Streamdown supports raw HTML through `rehype-raw`. To disable HTML entirely:

```tsx
import { Streamdown, defaultRehypePlugins } from 'streamdown';

export default function Page() {
  return (
    <Streamdown
      rehypePlugins={[
        // Omit defaultRehypePlugins.raw
        defaultRehypePlugins.katex,
        defaultRehypePlugins.harden,
      ]}
    >
      {markdown}
    </Streamdown>
  );
}
```

Without `rehype-raw`, HTML tags will be escaped and displayed as text.

## Relative URLs

Control how relative URLs are handled:

```tsx
{
  defaultOrigin: 'https://your-app.com'
}
```

Relative URLs will be resolved against this origin:

```markdown
[Relative link](/docs/guide)
```

Becomes: `https://your-app.com/docs/guide`

## Advanced URL Handling

For advanced URL handling beyond what `rehype-harden` provides, you can create a custom rehype plugin. This gives you full control over URL transformation and validation in your markdown content.


# Static Mode

Static mode is designed for rendering pre-generated markdown content, such as blog posts, documentation, or other static pages where content is already complete.

## When to Use Static Mode

Use static mode when:

* Rendering static markdown content (e.g., blog posts, docs)
* Content is pre-generated and not streaming
* You need improved fallback rendering for code blocks
* Streaming optimizations are unnecessary

## Basic Usage

Enable static mode by setting the `mode` prop to `"static"`:

```tsx title="app/blog/[slug]/page.tsx"
import { Streamdown } from 'streamdown';

export default function BlogPost({ content }: { content: string }) {
  return <Streamdown mode="static">{content}</Streamdown>;
}
```

## How It Works

Static mode skips streaming-related optimizations:

* **No block parsing**: Content is rendered as a single unit instead of being split into blocks
* **No incomplete markdown handling**: Assumes markdown is complete and well-formed
* **Improved code blocks**: Uses optimized rendering for static code blocks
* **Simpler rendering**: Direct ReactMarkdown rendering without streaming overhead

## Configuration

All standard Streamdown props work in static mode, including:

* Custom components
* Syntax highlighting themes
* Mermaid diagrams
* Plugin configuration

```tsx title="app/blog/[slug]/page.tsx"
<Streamdown
  mode="static"
  shikiTheme={['github-light', 'github-dark']}
  mermaidConfig={{ theme: 'neutral' }}
>
  {content}
</Streamdown>
```


# Unterminated Block Parsing

One of Streamdown's most powerful features is its ability to intelligently parse and style incomplete Markdown blocks. This feature, called **unterminated block parsing**, ensures that your streaming content looks polished even before the AI finishes its response.

## The Challenge

When AI models stream Markdown content token-by-token, the content often arrives incomplete:

```
**This is bold text
```

Without proper handling, this would either:

* Not render any formatting at all
* Display the raw Markdown syntax
* Break the layout

Streamdown solves this by detecting incomplete patterns and intelligently completing them for rendering purposes.

## How It Works

Streamdown's parser analyzes the incoming Markdown and identifies common patterns that might be incomplete. When detected, it automatically adds the closing syntax so the content renders correctly, then seamlessly updates when the actual closing syntax arrives.

### Supported Incomplete Patterns

#### Bold Text (`**text`)

```markdown
**This is bold text that hasn't been closed yet
```

The parser detects the opening `**` and adds a closing `**` to ensure the text renders as bold.

#### Italic Text (`*text` or `_text`)

```markdown
*This is italic text
_This is also italic
```

Single asterisks or underscores are completed automatically.

#### Bold Italic (`***text`)

```markdown
***This is bold and italic
```

Triple asterisks for combined formatting are handled.

#### Inline Code (`` `code ``)

```markdown
`const foo = "bar
```

Incomplete inline code blocks are closed with a backtick.

#### Strikethrough (`~~text`)

```markdown
~~This text is being crossed out
```

Strikethrough formatting is completed automatically.

#### Links (`[text](url)`)

Streamdown handles several link scenarios:

**Incomplete link text:**

```markdown
[Click here
```

Completes to: `[Click here](streamdown:incomplete-link)`

**Incomplete URL:**

```markdown
[Click here](https://exampl
```

Completes to: `[Click here](streamdown:incomplete-link)`

The special `streamdown:incomplete-link` URL ensures the link renders visually but doesn't navigate anywhere.

#### Images

For incomplete images, Streamdown removes them entirely rather than showing broken image placeholders:

```markdown
![Alt text that's incomplete
```

This prevents visual clutter during streaming.

#### Mathematical Expressions

Block-level KaTeX expressions are completed:

```markdown
$$
E = mc^2
```

The parser adds the closing `$$` to ensure proper math rendering.

## Configuration

Unterminated block parsing is enabled by default. You can disable it if needed:

```tsx
import { Streamdown } from 'streamdown';

export default function Page() {
  return (
    <Streamdown parseIncompleteMarkdown={false}>
      {markdown}
    </Streamdown>
  );
}
```

However, disabling this feature will result in incomplete Markdown syntax being displayed literally, which is generally not desirable for user-facing applications.

## Smart Behavior

Streamdown's parser includes intelligent rules to avoid false positives:

### List Item Detection

The parser won't close formatting markers that appear at the start of list items:

```markdown
- **
- Item with bold marker only
```

This prevents prematurely closing bold formatting that might be intentional list structure.

### Code Block Awareness

Formatting within complete code blocks is left untouched:

````markdown
```python
def foo():
    # This **won't** be treated as incomplete bold
    return "bar"
```
````

### Math Block Protection

Underscores within math blocks are not treated as italic markers:

```markdown
$$
E = m \times c^2
x_i = y_j
$$
```

### Word-Internal Characters

Asterisks and underscores within words (like variable names or between alphanumeric characters) are preserved:

```markdown
const user_name = "john_doe";
234234*123
hello*world
```

This ensures that text like product codes or mathematical expressions with asterisks are not mistakenly interpreted as italic formatting.

## Performance Considerations

Streamdown's parser is highly optimized:

* **Memoization** - Parsing results are cached to avoid redundant work
* **Early Exits** - The parser stops checking patterns once matches are found
* **Minimal Regex** - Uses efficient pattern matching techniques
* **Block-Level Processing** - Content is split into blocks for parallel processing

## Examples

### Bold Text Streaming

As content streams in:

1. `**This` â†’ Renders nothing (too short)
2. `**This is bol` â†’ Renders as **This is bol**
3. `**This is bold**` â†’ Renders as **This is bold**

### Link Streaming

1. `[Cli` â†’ Renders nothing
2. `[Click here` â†’ Renders as [Click here](streamdown:incomplete-link)
3. `[Click here](https://` â†’ Renders as [Click here](streamdown:incomplete-link)
4. `[Click here](https://example.com)` â†’ Renders as [Click here](https://example.com)

### Code Streaming

1. `` `const `` â†’ Renders as `const`
2. `` `const foo = `` â†’ Renders as `const foo =`
3. `` `const foo = "bar"` `` â†’ Renders as `const foo = "bar"`


# Typography

Streamdown comes with beautiful, built-in typography styles powered by Tailwind CSS. All standard Markdown elements are styled out of the box, ensuring your content looks polished without additional configuration.

## Headings

Streamdown supports all six levels of Markdown headings with responsive sizing and proper spacing:

```markdown
# Heading 1
## Heading 2
### Heading 3
#### Heading 4
##### Heading 5
###### Heading 6
```

Headings automatically include:

* Responsive font sizes that scale appropriately
* Proper font weights (semibold by default)
* Optimal line heights for readability
* Consistent vertical spacing

## Text Formatting

### Bold and Italic

Use standard Markdown syntax for emphasis:

```markdown
**Bold text** or __also bold__
*Italic text* or _also italic_
***Bold and italic***
```

### Strikethrough

GitHub Flavored Markdown strikethrough is fully supported:

```markdown
~~Crossed out text~~
```

### Inline Code

Inline code is styled with a subtle background and monospace font:

```markdown
Use the `Streamdown` component in your app.
```

## Links

Links are styled with underlines and appropriate colors:

```markdown
[Visit our website](https://streamdown.ai)
```

Features include:

* Distinct styling for regular links
* Proper hover and focus states
* Accessible color contrast
* Smooth transitions

## Lists

### Unordered Lists

```markdown
- First item
- Second item
  - Nested item
  - Another nested item
- Third item
```

### Ordered Lists

```markdown
1. First step
2. Second step
   1. Sub-step A
   2. Sub-step B
3. Third step
```

Lists include:

* Proper indentation for nested levels
* Consistent spacing between items
* Clear visual hierarchy
* Appropriate markers (bullets/numbers)

## Blockquotes

Blockquotes are styled with a left border and subtle background:

```markdown
> "The development of full artificial intelligence could spell the end of the human race."
> â€” Stephen Hawking
```

Features:

* Left accent border
* Subtle background color
* Proper padding and margin
* Italic text styling

## Code Blocks

Code blocks receive syntax highlighting via Shiki:

````markdown
```javascript
function greet(name) {
  return `Hello, ${name}!`;
}
```
````

See the [Code Blocks](/docs/code-blocks) documentation for detailed configuration options.

## Images

Images are responsive and properly contained:

```markdown
![Alt text](https://example.com/image.jpg)
```

Features:

* Responsive sizing
* Proper aspect ratio preservation
* Loading states
* Alt text for accessibility

## Tables

Tables are fully styled with borders and hover states:

```markdown
| Feature | Supported |
|---------|-----------|
| Markdown | âœ“ |
| Streaming | âœ“ |
| Math | âœ“ |
```

See the [GitHub Flavored Markdown](/docs/gfm) documentation for more table features.

## Horizontal Rules

Create visual separators:

```markdown
---
```

## Paragraphs

Paragraphs receive proper spacing and line height for optimal readability:

```markdown
This is a paragraph with normal text flow. It automatically wraps and includes proper spacing between adjacent paragraphs.

This is a second paragraph with appropriate margin top spacing.
```

